!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n;"undefined"!=typeof window?n=window:"undefined"!=typeof global?n=global:"undefined"!=typeof self&&(n=self),n.Elem=e()}}(function(){var e;return function n(e,t,r){function o(u,a){if(!t[u]){if(!e[u]){var c="function"==typeof require&&require;if(!a&&c)return c(u,!0);if(i)return i(u,!0);var s=new Error("Cannot find module '"+u+"'");throw s.code="MODULE_NOT_FOUND",s}var f=t[u]={exports:{}};e[u][0].call(f.exports,function(n){var t=e[u][1][n];return o(t?t:n)},f,f.exports,n,e,t,r)}return t[u].exports}for(var i="function"==typeof require&&require,u=0;u<r.length;u++)o(r[u]);return o}({1:[function(e,n,t){t.debug=!1,t.perfs=!1,t.voidElements=["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"],t.events=["wheel","scroll","touchcancel","touchend","touchmove","touchstart","click","doubleclick","drag","dragend","dragenter","dragexit","dragleave","dragover","dragstart","drop","change","input","submit","focus","blur","keydown","keypress","keyup","copy","cut","paste","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup"];var r={mark:function(){},measure:function(){},getEntriesByName:function(){return[]},getEntriesByType:function(){return[]},clearMarks:function(){},clearMeasures:function(){}};"undefined"==typeof window&&(window={__fake:!0}),"undefined"==typeof window.console&&(window.console={log:function(){},error:function(){},table:function(){},debug:function(){},trace:function(){}}),"undefined"!=typeof window.performance&&"undefined"!=typeof window.performance.mark&&"undefined"!=typeof window.performance.measure&&(r=window.performance),window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(){return window.console&&console.error("[ELEMJS] No requestAnimationFrame, using lame polyfill ..."),function(e){window.setTimeout(e,1e3/60)}}();var o="ElemMeasureStart",i="ElemMeasureStop",u="ElemComponentRenderingMeasure",a=[u];t.markStart=function(e){t.perfs&&r.mark(e?e+"_start":o)},t.markStop=function(e){t.perfs&&(e?(r.mark(e+"_stop"),r.measure(e,e+"_start",e+"_stop"),_.contains(a,e)||a.push(e)):(r.mark(i),r.measure(u,o,i)))},t.collectMeasures=function(){if(!t.perfs)return[];var e=[];return _.each(a,function(n){e=e.concat(r.getEntriesByName(n))}),r.clearMarks(),r.clearMeasures(),a=[u],e},t.printMeasures=function(){t.perfs&&window.console&&console.table(t.collectMeasures())},t.defer=function(e){window.requestAnimationFrame.call(window,e)},t.defered=function(e){return function(){t.defer(e)}},Function.prototype.bind||(window.console&&console.error("[ELEMJS] No Function.prototype.bind, using polyfill ..."),Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - can't call bounded element");var n=Array.prototype.slice.call(arguments,1),t=this,r=function(){},o=function(){return t.apply(this instanceof r&&e?this:e,n.concat(Array.prototype.slice.call(arguments)))};return r.prototype=this.prototype,o.prototype=new r,o})},{}],2:[function(e,n,t){function r(e,n){return e.attributes&&e.attributes["data-"+n]}function o(e,n){return e.dataset?e.dataset[n]:e.attributes["data-"+n]}function i(e){d[e]&&(d[e](),delete d[e])}function u(e,n){function t(){s.markStart(u+".globalRendering"),f.each(m,function(e){delete p[e]}),m=[];var n=document.activeElement||{},t=n.dataset?n.dataset.key:(n.attributes||[]).key,r={},o=[];f.each(h,function(e){i(e)}),h=[],g(a,f.clone(c),{refs:r,getDOMNode:E}),s.markStart(u+".render");var d=y(a,f.clone(c),{refs:r,getDOMNode:E});if(s.markStop(u+".render"),l.render(d,e,{waitingHandlers:o,__rootListener:!0,refs:r,__innerComponents:h}),b(a,f.clone(c),{refs:r,getDOMNode:E}),t){var v=document.querySelector('[data-key="'+t+'"]');if(f.focus(v),v.value){var w=2*v.value.length;v.setSelectionRange(w,w)}}f.each(o,function(e){m.push(e.id+"_"+e.event.replace("on","")),p[e.id+"_"+e.event.replace("on","")]=function(){e.callback.apply({render:y},arguments)}}),s.markStop(u+".globalRendering")}var u=n.name||"Component",a=n.state||l.state(),c=n.props||{},p={},m=[],h=[],v=(n.init||function(){}).bind(n),g=(n.beforeRender||function(){}).bind(n),y=(n.render||function(){}).bind(n),b=(n.afterRender||function(){}).bind(n),w=(n.unmount||function(){}).bind(n),E=function(){return f.findNode(e)},S=function(e){e=e||window.event;var n=e.target||e.srcElement,t=o(n,"nodeid")+"_"+e.type;if(p[t])p[t](e);else{for(;!p[t]&&n&&null!==n&&r(n,"nodeid");)n=n.parentElement,n&&null!==n&&r(n,"nodeid")&&(t=o(n,"nodeid")+"_"+e.type);p[t]&&p[t](e)}};return i(e),d[e]=function(){w(a,f.clone(c),{refs:{},getDOMNode:E}),a.replace({},!0),f.off(e,s.events,S)},v(a,f.clone(c)),f.on(e,s.events,S),t(),a.onChange(t),a}function a(e,n){var t=e.name||"Component",r=e.state||l.state(),o=e.props||{},i=e.render,u=e.afterRender||function(){};e.init&&e.init(r,f.clone(o)),s.markStart(t+".globalRendering");var a={};s.markStart(t+".render");var c=i(r,f.clone(o),{refs:a,getDOMNode:function(){}});s.markStop(t+".render");var d=l.renderToString(c,{waitingHandlers:[],__rootListener:!0,refs:a,__noDataId:n,__innerComponents:[]});return u(r,f.clone(o),{refs:a,getDOMNode:function(){}}),s.markStop(t+".globalRendering"),d}function c(e){return function(n,t){var r={__componentFactory:!0,renderToStaticHtml:function(){var t=f.clone(e);return t.props=f.extend(f.clone(e.props||{}),n||{}),a(t,!0)},renderToString:function(){var t=f.clone(e);return t.props=f.extend(f.clone(e.props||{}),n||{}),a(t)},renderTo:function(t,r){var o=f.clone(e);return o.props=f.extend(f.clone(e.props||{}),n||{}),r?void s.defer(function(){u(t,o)}):u(t,o)}};return t?r.renderTo(t):r}}var s=e("./common"),f=e("./utils"),l=e("./elem"),d={};t.unmountComponent=i,t.component=function(e){if(!e.container)return c(e);var n=e.container;u(n,e)},t.componentToString=function(e){var n=f.clone(e);return n.props=f.extend(f.clone(e.props||{}),props||{}),a(n)}},{"./common":1,"./elem":3,"./utils":7}],3:[function(n,t,r){function o(e){if(m.isUndefined(e))return"";var n=m.map(m.keys(e),function(n){var t=m.dasherize(n);"className"===n&&(t="class");var r=e[n];return!m.isUndefined(r)&&m.isFunction(r)&&(r=r()),m.isUndefined(r)?void 0:t+": "+r+";"});return n=m.filter(n,function(e){return!m.isUndefined(e)}),n.join(" ")}function i(e){if(m.isUndefined(e))return[];var n=m.map(m.keys(e),function(n){var t=e[n];return m.isUndefined(t)||t!==!0?void 0:m.dasherize(n)});return n=m.filter(n,function(e){return!m.isUndefined(e)})}function u(e){return 0===e?e:""===e?[]:e||[]}function a(e){return{getDOMNode:function(){return m.findNode('[data-nodeid="'+e+'"]')}}}function c(e,n,t){m.each(m.keys(e),function(r){var o=m.dasherize(r);m.startsWith(o,"on")&&t&&t.waitingHandlers&&t.waitingHandlers.push({root:t.root,id:n,event:o,callback:e[r]}),"ref"===o&&t&&t.refs&&(t.refs[e[r]]=a(n))})}function s(e,n){return{key:e,value:n}}function f(e){if(m.isUndefined(e))return[];var n=[];return m.each(m.keys(e),function(t){var r=m.dasherize(t);if("className"===t&&(r="class"),!m.startsWith(r,"on")&&"ref"!==r){var u=e[t];!m.isUndefined(u)&&m.isFunction(u)&&(u=u()),m.isUndefined(u)||n.push(m.isObject(u)&&"style"===r?s("style",o(u)):m.isArray(u)&&"class"===r?s(r,u.join(" ")):m.isObject(u)&&"class"===r?s(r,i(u).join(" ")):s(r,u))}}),n}function l(e,n,t){var r=m.uniqueId("node_");!m.isUndefined(t)||m.isUndefined(n)||n.__isAttrs||(t=n,n={}),e=m.escape(e)||"unknown",n=n||{},t=u(t),(m.isRegExp(t)||m.isUndefined(t)||m.isNull(t))&&(t=[]),m.isArray(t)&&(t=m.chain(t).map(function(e){return m.isFunction(e)?e():e}).filter(function(e){return!m.isUndefined(e)}).value());var o=m.contains(p.voidElements,e.toUpperCase())&&(m.isNull(t)||m.isUndefined(t)||m.isArray(t)&&0===t.length),i=f(n);return i.push(s("data-nodeid",m.escape(r))),p.debug&&i.push(s("title",m.escape(r))),{name:e,attrs:n,children:t,isElement:!0,nodeId:r,toJsonString:function(e){return e?JSON.stringify(this,null,2):JSON.stringify(this)},toHtmlNode:function(u,a){function s(e,n){if(m.isNumber(e))n.appendChild(u.createTextNode(e+""));else if(m.isString(e))n.appendChild(u.createTextNode(e));else if(m.isBoolean(e))n.appendChild(u.createTextNode(e+""));else if(m.isObject(e)&&e.isElement)n.appendChild(e.toHtmlNode(u,a));else if(m.isObject(e)&&e.__asHtml)n.innerHTML=e.__asHtml;else if(e.__componentFactory){var t=m.escape(m.uniqueId("component_")),r=u.createElement("span");r.setAttribute("data-componentid",t),n.appendChild(r),a.__innerComponents.push('[data-componentid="'+t+'"]'),e.renderTo('[data-componentid="'+t+'"]',!0)}else n.appendChild(u.createTextNode(e.toString()))}c(n,r,a);var f=u.createElement(m.escape(e));return m.each(i,function(e){f.setAttribute(e.key,e.value)}),o||(m.isArray(t)?m.each(t,function(e){s(e,f)}):s(t,f)),f}}}function d(e,n,t){return m.isFunction(e)&&(e=e((t||{props:{}}).props)),m.isUndefined(e)?[]:m.isArray(e)?m.chain(e).map(function(e){return m.isFunction(e)?e():e}).filter(function(e){return!m.isUndefined(e)}).map(function(e){return e.toHtmlNode(n,t)}).value():[e.toHtmlNode(n,t)]}var p=n("./common"),m=n("./utils"),h=n("./component"),v=n("./state"),g=n("./webcomponent").registerWebComponent,y=n("./stringify"),b=n("./events");r.renderToString=function(e,n){p.markStart("Elem.renderToString");var t=m.map(d(e,y(n)),function(e){return e.toHtmlString()}).join("");return p.markStop("Elem.renderToString"),t},r.el=l,r.sel=function(e,n){return l(e,{},n)},r.vel=function(e,n){return l(e,n,[])},r.nbsp=function(e){return l("span",{__asHtml:m.times(e||1,function(){return"&nbsp;"})})},r.text=function(e){return l("span",{},e)},r.elements=function(){return m.map(arguments,function(e){return e})},r.render=function(e,n,t){p.markStart("Elem.render");var r=(t||{}).waitingHandlers||[],o=(t||{}).refs||{},i=(t||{}).props||{},u=(t||{}).__innerComponents||[],a=document;if(n.ownerDocument&&(a=n.ownerDocument),m.isString(n)&&(n=a.querySelector(n)),!m.isUndefined(n)&&!m.isNull(n)){for(var c=d(e,a,{root:n,waitingHandlers:r,refs:o,props:i,__innerComponents:u});!m.isUndefined(n)&&!m.isNull(n)&&n.firstChild;)n.removeChild(n.firstChild);m.each(c,function(e){m.isUndefined(n)||m.isNull(n)||n.appendChild(e)}),t&&t.__rootListener||m.each(r,function(e){m.on('[data-nodeid="'+e.id+'"]',[e.event.replace("on","")],function(){e.callback.apply({},arguments)})})}p.markStop("Elem.render")},r.unmountComponent=h.unmountComponent,r.component=h.component,r.componentToString=h.componentToString,r.state=v,r.Utils=m,r.registerWebComponent=g,r.dispatcher=b,r.Perf={start:function(){p.perfs=!0},stop:function(){p.stop=!1},markStart:p.markStart,markStop:p.markStop,collectMeasures:p.collectMeasures,printMeasures:p.printMeasures},r.predicate=function(e,n){return m.isFunction(e)?e()===!0?n:void 0:e===!0?n:void 0},r.p=r.predicate,r.ifPred=r.predicate,r.cssClass=function(e){return m.extend({},{extend:function(n){return m.extend({},n,e)}},e)},"function"==typeof e&&e.amd&&e("elem",[],function(){return t.exports})},{"./common":1,"./component":2,"./events":4,"./state":5,"./stringify":6,"./utils":7,"./webcomponent":8}],4:[function(e,n){var t=e("./utils"),r=/\s+/;n.exports=function(){function e(e,o){var i=[e];r.test(e)&&(i=e.split(r)),t.each(i,function(e){t.each(n,function(n){"all"===n.name?n.callback(e,o):n.name===e&&n.callback(o)})})}var n=[];return{trigger:e,dispatch:e,on:function(e,t){this.off(e,t),n.push({name:e,callback:t})},off:function(e,r){n=t.filter(n,function(n){return n.name===e&&n.callback===r?!1:!0})}}}},{"./utils":7}],5:[function(e,n){var t=e("./utils");n.exports=function(e){function n(){t.each(o,function(e){e()})}var r=t.extend({},e||{}),o=[],i=function(){return t.clone(r)};return t.extend(i,{onChange:function(e){o.push(e)},get:function(e){return r[e]},all:function(){return t.clone(r)},forceUpdate:function(){n()},set:function(e,o){var i=t.isBoolean(o)&&o===!0;!t.isUndefined(e)&&t.isObject(e)&&(t.map(t.keys(e),function(n){r[n]=e[n]}),i||n(),i||(o||function(){})())},replace:function(e,n){r={},this.set(e,n)},remove:function(e){delete r[e],n()}})}},{"./utils":7}],6:[function(e,n){var t=e("./common"),r=e("./utils");n.exports=function(e){function n(n){var o=[],i=[];return{setAttribute:function(n,t){"data-nodeid"===n?e.__noDataId||o.push('data-snodeid="'+t+'"'):o.push(n+'="'+t+'"')},appendChild:function(e){i.push(e)},toHtmlString:function(){var e=r.contains(t.voidElements,n.toUpperCase())&&0===i.length;return e?"<"+n+" "+o.join(" ")+" />":"<"+n+" "+o.join(" ")+">"+r.map(i,function(e){return e.toHtmlString()}).join("")+"</"+n+">"}}}return e=e||{},{createElement:n,createTextNode:function(e){return{toHtmlString:function(){return e}}}}}},{"./common":1,"./utils":7}],7:[function(e,n,t){function r(e){if(!N(e))return[];if(Object.keys)return Object.keys(e);var n=[];for(var t in e)T(e,t)&&n.push(t);return n}function o(e){for(var n=n(e),t=n.length,r=Array(t),o=0;t>o;o++)r[o]=e[n[o]];return r}function i(e,n,t){if(null==e)return-1;var r=0,o=e.length;if(t){if("number"!=typeof t)return r=sortedIndex(e,n),e[r]===n?r:-1;r=0>t?Math.max(0,o+t):t}for(;o>r;r++)if(e[r]===n)return r;return-1}function u(e,n){if(null==e)return e;var t,r=e.length;if(r===+r)for(t=0;r>t;t++)n(e[t],t,e);else{var o=o(e);for(t=0,r=o.length;r>t;t++)n(e[o[t]],o[t],e)}return e}function a(e,n){if(null==e)return[];for(var t,r=e.length!==+e.length&&r(e),o=(r||e).length,i=Array(o),u=0;o>u;u++)t=r?r[u]:u,i[u]=n(e[t],t,e);return i}function c(e,n){var t=[];return null==e?t:(u(e,function(e,r,o){n(e,r,o)&&t.push(e)}),t)}function s(e,n,t){null==e&&(e=[]);var r,o=e.length!==+e.length&&o(e),i=(o||e).length,u=0;if(arguments.length<3){if(!i)throw new TypeError(reduceError);t=e[o?o[u++]:u++]}for(;i>u;u++)r=o?o[u]:u,t=n(t,e[r],r,e);return t}function f(e,n,t){return c(e,h(n),t)}function l(e,n){return c(e,d(n))}function d(e){var n=n(e),t=n.length;return function(e){if(null==e)return!t;e=new Object(e);for(var r=0;t>r;r++){var o=n[r],i=o[0];if(o[1]!==e[i]||!(i in e))return!1}return!0}}function p(e){return e}function m(e){return function(n){return n[e]}}function h(e){return function(){return!e.apply(this,arguments)}}function v(e){for(var n=n(e),t=n.length,r=Array(t),o=0;t>o;o++)r[o]=[n[o],e[n[o]]];return r}function g(e){function n(){return{value:function(){return t},map:function(e){return t=r.map(t,e),this},filter:function(e){return t=r.filter(t,e),this},each:function(e){return r.each(t,e),this},values:function(){return r.values()},keys:function(){return r.keys()},reduce:function(e,n,o){return r.reduce(t,e,n,o)},reject:function(e,n){return t=r.reject(t,e,n),this},where:function(e){return t=r.where(t,e),this}}}var t=e,r=this;return n()}function y(e,n){return null==e?!1:(e.length!==+e.length&&(e=o(e)),i(e,n)>=0)}function b(e){var n=++I+"";return e?e+n:n}function w(e,n){for(var t=[],r=0;e>r;r++)t.push(n(e));return t}function E(e){return N(e)?_(e)?e.slice():S({},e):e}function S(e){if(!N(e))return e;for(var n,t,r=1,o=arguments.length;o>r;r++){n=arguments[r];for(t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e}function k(e){return void 0===e}function _(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)}function N(e){var n=typeof e;return"function"===n||"object"===n&&!!e}function C(e){return"[object Number]"===Object.prototype.toString.call(e)}function O(e){return"[object String]"===Object.prototype.toString.call(e)}function x(e){return e===!0||e===!1||"[object Boolean]"===Object.prototype.toString.call(e)}function A(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function j(e){return"[object Function]"===Object.prototype.toString.call(e)}function M(e){return null===e}function U(e){return C(e)&&e!==+e}function T(e,n){return null!=e&&Object.prototype.hasOwnProperty.call(e,n)}function F(e){return e.replace(/([A-Z\d]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").toLowerCase().replace(/_/g,"-")}function R(e,n){return 0===e.indexOf(n)}function H(e){e.focus&&e.focus()}function q(e){return e===document.activeElement&&(!document.hasFocus||document.hasFocus())&&!!(e.type||e.href||~e.tabIndex)}function L(e,n,t){var r=O(e)?document.querySelector(e):e;u(n,function(e){r&&null!==r&&(r.addEventListener?r.addEventListener(e,t,!1):r.attachEvent&&r.addEventListener(e,t))})}function D(e,n,t){var r=O(e)?document.querySelector(e):e;u(n,function(e){r&&null!==r&&r.removeEventListener&&r.removeEventListener(e,t,!1)})}function B(){return document.querySelector(node)}var I=0,z={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},W=function(e,n){var t=function(n){return e[n]},r="(?:"+n(e).join("|")+")",o=RegExp(r),i=RegExp(r,"g");return function(e){return e=null==e?"":""+e,o.test(e)?e.replace(i,t):e}};t.escape=W(z,r),t.keys=r,t.values=o,t.indexOf=i,t.each=u,t.map=a,t.filter=c,t.chain=g,t.contains=y,t.uniqueId=b,t.times=w,t.clone=E,t.extend=S,t.isUndefined=k,t.isArray=_,t.isObject=N,t.isNumber=C,t.isString=O,t.isBoolean=x,t.isRegExp=A,t.isFunction=j,t.isNull=M,t.isNaN=U,t.has=T,t.dasherize=F,t.startsWith=R,t.focus=H,t.hasFocus=q,t.on=L,t.off=D,t.findNode=B,t.reduce=s,t.reject=f,t.where=l,t.matches=d,t.negate=h,t.property=m,t.identity=p,t.pairs=v},{}],8:[function(e,n,t){function r(e,n){var t=document,r=Object.create(HTMLElement.prototype);r.createdCallback=function(){var e={};for(var r in this.attributes){var o=this.attributes[r];e[o.name]=o.value}this.props=e;var i=this;if("true"!==e.noshadow){var u=this.createShadowRoot();i=t.createElement("div"),i.setAttribute("class","elemcomponent"),u.appendChild(i)}this._node=i,this.renderedElement=e.renderOnly&&e.renderOnly===!0?Elem.render(n,i):Elem.component({container:i,init:n.init,render:n.render,props:e,state:n.state})},r.attributeChangedCallback=function(e,t,r){this.props[e]=r;var o=this.props;this.renderedElement=this.props.renderOnly&&this.props.renderOnly===!0?Elem.render(n,this._node):Elem.component({container:this._node,init:n.init,render:n.render,props:o,state:n.state})},o(e,{prototype:r})}var o=void 0;try{o=(document.registerElement||document.register||function(){window.console&&console.error("[ELEMJS] No registerElement function, webcomponents will not work !!!")}).bind(document)}catch(i){}t.registerWebComponent=o?r:function(){window.console&&console.error("[ELEMJS] WebComponent not available here :(")}},{}]},{},[3])(3)});
//# sourceMappingURL=elem.min.map