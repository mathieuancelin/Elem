!function(n){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.Elem=n()}}(function(){var n;return function e(n,t,r){function o(u,a){if(!t[u]){if(!n[u]){var c="function"==typeof require&&require;if(!a&&c)return c(u,!0);if(i)return i(u,!0);var s=new Error("Cannot find module '"+u+"'");throw s.code="MODULE_NOT_FOUND",s}var f=t[u]={exports:{}};n[u][0].call(f.exports,function(e){var t=n[u][1][e];return o(t?t:e)},f,f.exports,e,n,t,r)}return t[u].exports}for(var i="function"==typeof require&&require,u=0;u<r.length;u++)o(r[u]);return o}({1:[function(n,e,t){var r=n("./utils");t.debug=!1,t.perfs=!1,t.voidElements=["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"],t.events=["wheel","scroll","touchcancel","touchend","touchmove","touchstart","click","doubleclick","drag","dragend","dragenter","dragexit","dragleave","dragover","dragstart","drop","change","input","submit","focus","blur","keydown","keypress","keyup","copy","cut","paste","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup"];var o={mark:function(){},measure:function(){},getEntriesByName:function(){return[]},getEntriesByType:function(){return[]},clearMarks:function(){},clearMeasures:function(){}};"undefined"==typeof window&&(window={__fake:!0}),"undefined"==typeof window.console&&(window.console={log:function(){},error:function(){},table:function(){},debug:function(){},trace:function(){}}),"undefined"!=typeof window.performance&&"undefined"!=typeof window.performance.mark&&"undefined"!=typeof window.performance.measure&&(o=window.performance),window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(){return window.console&&console.error("[ELEMJS] No requestAnimationFrame, using lame polyfill ..."),function(n){window.setTimeout(n,1e3/60)}}();var i="ElemMeasureStart",u="ElemMeasureStop",a="ElemComponentRenderingMeasure",c=[a];t.markStart=function(n){t.perfs&&o.mark(n?n+"_start":i)},t.markStop=function(n){t.perfs&&(n?(o.mark(n+"_stop"),o.measure(n,n+"_start",n+"_stop"),r.contains(c,n)||c.push(n)):(o.mark(u),o.measure(a,i,u)))},t.collectMeasures=function(){if(!t.perfs)return[];var n=[];return r.each(c,function(e){n=n.concat(o.getEntriesByName(e))}),o.clearMarks(),o.clearMeasures(),c=[a],n},t.printMeasures=function(){t.perfs&&window.console&&console.table(t.collectMeasures())},t.defer=function(n){window.requestAnimationFrame.call(window,n)},t.defered=function(n){return function(){t.defer(n)}},t.__internalAccess={},Function.prototype.bind||(window.console&&console.error("[ELEMJS] No Function.prototype.bind, using polyfill ..."),Function.prototype.bind=function(n){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - can't call bounded element");var e=Array.prototype.slice.call(arguments,1),t=this,r=function(){},o=function(){return t.apply(this instanceof r&&n?this:n,e.concat(Array.prototype.slice.call(arguments)))};return r.prototype=this.prototype,o.prototype=new r,o})},{"./utils":7}],2:[function(n,e,t){function r(n,e){return n.attributes&&n.attributes["data-"+e]}function o(n,e){return n.dataset?n.dataset[e]:n.attributes["data-"+e]}function i(n){l[n]&&(l[n](),delete l[n])}function u(n,e){function t(){s.markStart(a+".globalRendering"),f.each(m,function(n){delete p[n]}),m=[];var e=document.activeElement||{},t=e.dataset?e.dataset.key:(e.attributes||[]).key,r={},o=[];f.each(h,function(n){i(n)}),h=[],g(c,f.clone(d),{refs:r,getDOMNode:_}),s.markStart(a+".render");var l=y(c,f.clone(d),{refs:r,getDOMNode:_});if(s.markStop(a+".render"),u.render(l,n,{waitingHandlers:o,__rootListener:!0,refs:r,__innerComponents:h}),b(c,f.clone(d),{refs:r,getDOMNode:_}),t){var v=document.querySelector('[data-key="'+t+'"]');if(f.focus(v),v.value){var w=2*v.value.length;v.setSelectionRange(w,w)}}f.each(o,function(n){m.push(n.id+"_"+n.event.replace("on","")),p[n.id+"_"+n.event.replace("on","")]=function(){n.callback.apply({render:y},arguments)}}),s.markStop(a+".globalRendering")}var u=s.__internalAccess.api,a=e.name||"Component",c=e.state||u.state(),d=e.props||{},p={},m=[],h=[],v=(e.init||function(){}).bind(e),g=(e.beforeRender||function(){}).bind(e),y=(e.render||function(){}).bind(e),b=(e.afterRender||function(){}).bind(e),w=(e.unmount||function(){}).bind(e),_=function(){return f.findNode(n)},E=function(n){n=n||window.event;var e=n.target||n.srcElement,t=o(e,"nodeid")+"_"+n.type;if(p[t])p[t](n);else{for(;!p[t]&&e&&null!==e&&r(e,"nodeid");)e=e.parentElement,e&&null!==e&&r(e,"nodeid")&&(t=o(e,"nodeid")+"_"+n.type);p[t]&&p[t](n)}};return i(n),l[n]=function(){w(c,f.clone(d),{refs:{},getDOMNode:_}),c.replace({},!0),f.off(n,s.events,E)},v(c,f.clone(d)),f.on(n,s.events,E),t(),c.onChange(t),c}function a(n,e){var t=s.__internalAccess.api,r=n.name||"Component",o=n.state||t.state(),i=n.props||{},u=n.render,a=n.afterRender||function(){};n.init&&n.init(o,f.clone(i)),s.markStart(r+".globalRendering");var c={};s.markStart(r+".render");var l=u(o,f.clone(i),{refs:c,getDOMNode:function(){}});s.markStop(r+".render");var d=t.renderToString(l,{waitingHandlers:[],__rootListener:!0,refs:c,__noDataId:e,__innerComponents:[]});return a(o,f.clone(i),{refs:c,getDOMNode:function(){}}),s.markStop(r+".globalRendering"),d}function c(n){return function(e,t){var r={__componentFactory:!0,renderToStaticHtml:function(){var t=f.clone(n);return t.props=f.extend(f.clone(n.props||{}),e||{}),a(t,!0)},renderToString:function(){var t=f.clone(n);return t.props=f.extend(f.clone(n.props||{}),e||{}),a(t)},renderTo:function(t,r){var o=f.clone(n);return o.props=f.extend(f.clone(n.props||{}),e||{}),r?void s.defer(function(){u(t,o)}):u(t,o)}};return t?r.renderTo(t):r}}var s=n("./common"),f=n("./utils"),l={};t.unmountComponent=i,t.component=function(n){if(!n.container)return c(n);var e=n.container;u(e,n)},t.componentToString=function(n){var e=f.clone(n);return e.props=f.extend(f.clone(n.props||{}),props||{}),a(e)}},{"./common":1,"./utils":7}],3:[function(e,t,r){function o(n){if(m.isUndefined(n))return"";var e=m.map(m.keys(n),function(e){var t=m.dasherize(e);"className"===e&&(t="class");var r=n[e];return!m.isUndefined(r)&&m.isFunction(r)&&(r=r()),m.isUndefined(r)?void 0:t+": "+r+";"});return e=m.filter(e,function(n){return!m.isUndefined(n)}),e.join(" ")}function i(n){if(m.isUndefined(n))return[];var e=m.map(m.keys(n),function(e){var t=n[e];return m.isUndefined(t)||t!==!0?void 0:m.dasherize(e)});return e=m.filter(e,function(n){return!m.isUndefined(n)})}function u(n){return 0===n?n:""===n?[]:n||[]}function a(n){return{getDOMNode:function(){return m.findNode('[data-nodeid="'+n+'"]')}}}function c(n,e,t){m.each(m.keys(n),function(r){var o=m.dasherize(r);m.startsWith(o,"on")&&t&&t.waitingHandlers&&t.waitingHandlers.push({root:t.root,id:e,event:o,callback:n[r]}),"ref"===o&&t&&t.refs&&(t.refs[n[r]]=a(e))})}function s(n,e){return{key:n,value:e}}function f(n){if(m.isUndefined(n))return[];var e=[];return m.each(m.keys(n),function(t){var r=m.dasherize(t);if("className"===t&&(r="class"),!m.startsWith(r,"on")&&"ref"!==r){var u=n[t];!m.isUndefined(u)&&m.isFunction(u)&&(u=u()),m.isUndefined(u)||e.push(m.isObject(u)&&"style"===r?s("style",o(u)):m.isArray(u)&&"class"===r?s(r,u.join(" ")):m.isObject(u)&&"class"===r?s(r,i(u).join(" ")):s(r,u))}}),e}function l(n,e,t){var r=m.uniqueId("node_");!m.isUndefined(t)||m.isUndefined(e)||e.__isAttrs||(t=e,e={}),arguments.length>3&&(n=arguments[0],e=e.isElement?{}:arguments[1],t=[].concat(arguments),t.shift(),t.shift()),n=m.escape(n)||"unknown",e=e||{},t=u(t),(m.isRegExp(t)||m.isUndefined(t)||m.isNull(t))&&(t=[]),m.isArray(t)&&(t=m.chain(t).map(function(n){return m.isFunction(n)?n():n}).filter(function(n){return!m.isUndefined(n)}).value());var o=m.contains(p.voidElements,n.toUpperCase())&&(m.isNull(t)||m.isUndefined(t)||m.isArray(t)&&0===t.length),i=f(e);return i.push(s("data-nodeid",m.escape(r))),p.debug&&i.push(s("title",m.escape(r))),{name:n,attrs:e,children:t,isElement:!0,nodeId:r,toJsonString:function(n){return n?JSON.stringify(this,null,2):JSON.stringify(this)},toHtmlNode:function(u,a){function s(n,e){if(m.isNumber(n))e.appendChild(u.createTextNode(n+""));else if(m.isString(n))e.appendChild(u.createTextNode(n));else if(m.isBoolean(n))e.appendChild(u.createTextNode(n+""));else if(m.isObject(n)&&n.isElement)e.appendChild(n.toHtmlNode(u,a));else if(m.isObject(n)&&n.__asHtml)e.innerHTML=n.__asHtml;else if(n.__componentFactory){var t=m.escape(m.uniqueId("component_")),r=u.createElement("span");r.setAttribute("data-componentid",t),e.appendChild(r),a.__innerComponents.push('[data-componentid="'+t+'"]'),n.renderTo('[data-componentid="'+t+'"]',!0)}else e.appendChild(u.createTextNode(n.toString()))}var f=this.name;c(e,r,a);var l=u.createElement(m.escape(n));return m.each(i,function(n){f&&"input"===f&&"value"===n.key?l.value=n.value:l.setAttribute(n.key,n.value)}),o||(m.isArray(t)?m.each(t,function(n){s(n,l)}):s(t,l)),l}}}function d(n,e,t){return m.isFunction(n)&&(n=n((t||{props:{}}).props)),m.isUndefined(n)?[]:m.isArray(n)?m.chain(n).map(function(n){return m.isFunction(n)?n():n}).filter(function(n){return!m.isUndefined(n)}).map(function(n){return n.toHtmlNode(e,t)}).value():[n.toHtmlNode(e,t)]}var p=e("./common"),m=e("./utils"),h=e("./component"),v=e("./state"),g=e("./webcomponent").registerWebComponent,y=e("./stringify"),b=e("./events");r.renderToString=function(n,e){p.markStart("Elem.renderToString");var t=m.map(d(n,y(e)),function(n){return n.toHtmlString()}).join("");return p.markStop("Elem.renderToString"),t},r.renderToStaticHtml=function(n){p.markStart("Elem.renderToStaticHtml");var e=m.map(d(n,y({__noDataId:!0})),function(n){return n.toHtmlString()}).join("");return p.markStop("Elem.renderToStaticHtml"),e},r.el=l,r.sel=function(n,e){return l(n,{},e)},r.vel=function(n,e){return l(n,e,[])},r.nbsp=function(n){return l("span",{__asHtml:m.times(n||1,function(){return"&nbsp;"})})},r.text=function(n){return l("span",{},n)},r.render=function(n,e,t){p.markStart("Elem.render");var r=(t||{}).waitingHandlers||[],o=(t||{}).refs||{},i=(t||{}).props||{},u=(t||{}).__innerComponents||[],a=document;if(e.ownerDocument&&(a=e.ownerDocument),m.isString(e)&&(e=a.querySelector(e)),!m.isUndefined(e)&&!m.isNull(e)){for(var c=d(n,a,{root:e,waitingHandlers:r,refs:o,props:i,__innerComponents:u});!m.isUndefined(e)&&!m.isNull(e)&&e.firstChild;)e.removeChild(e.firstChild);m.each(c,function(n){m.isUndefined(e)||m.isNull(e)||e.appendChild(n)}),t&&t.__rootListener||m.each(r,function(n){m.on('[data-nodeid="'+n.id+'"]',[n.event.replace("on","")],function(){n.callback.apply({},arguments)})})}p.markStop("Elem.render")},r.unmountComponent=h.unmountComponent,r.component=h.component,r.componentToString=h.componentToString,r.state=v,r.Utils=m,r.registerWebComponent=g,r.dispatcher=b,r.Perf={start:function(){p.perfs=!0},stop:function(){p.stop=!1},markStart:p.markStart,markStop:p.markStop,collectMeasures:p.collectMeasures,printMeasures:p.printMeasures},r.defer=p.defer,r.predicate=function(n,e){return m.isFunction(n)?n()===!0?e:void 0:n===!0?e:void 0},r.style=function(n){var e={},t=m.keys(n);return m.each(t,function(t){var r=n[t];m.isObject(r)&&(e[t]=m.extend({},{extend:function(n){return m.extend({},n,r)}},r))}),e.extend=m.extend({},{extend:function(e){return m.extend({},e,n)}},n),e},p.__internalAccess.api=r,"function"==typeof n&&n.amd&&n("elem",[],function(){return t.exports})},{"./common":1,"./component":2,"./events":4,"./state":5,"./stringify":6,"./utils":7,"./webcomponent":8}],4:[function(n,e){var t=n("./utils"),r=/\s+/;e.exports=function(){function n(n,o){var i=[n];r.test(n)&&(i=n.split(r)),t.each(i,function(n){t.each(e,function(e){"all"===e.name?e.callback(n,o):e.name===n&&e.callback(o)})})}var e=[];return{trigger:n,dispatch:n,on:function(n,t){this.off(n,t),e.push({name:n,callback:t})},off:function(n,r){e=t.filter(e,function(e){return e.name===n&&e.callback===r?!1:!0})}}}},{"./utils":7}],5:[function(n,e){var t=n("./utils");e.exports=function(n){function e(){t.each(o,function(n){n()})}var r=t.extend({},n||{}),o=[],i=function(){return t.clone(r)};return t.extend(i,{onChange:function(n){o.push(n)},get:function(n){return r[n]},all:function(){return t.clone(r)},forceUpdate:function(){e()},set:function(n,o){var i=t.isBoolean(o)&&o===!0;!t.isUndefined(n)&&t.isObject(n)&&(t.map(t.keys(n),function(e){r[e]=n[e]}),i||e(),i||(o||function(){})())},replace:function(n,e){r={},this.set(n,e)},remove:function(n){delete r[n],e()}})}},{"./utils":7}],6:[function(n,e){var t=n("./common"),r=n("./utils");e.exports=function(n){function e(e){var o=[],i=[];return{setAttribute:function(e,t){"data-nodeid"===e?n.__noDataId||o.push('data-snodeid="'+t+'"'):o.push(e+'="'+t+'"')},appendChild:function(n){i.push(n)},toHtmlString:function(){var n=r.contains(t.voidElements,e.toUpperCase())&&0===i.length;return n?"<"+e+" "+o.join(" ")+" />":"<"+e+" "+o.join(" ")+">"+r.map(i,function(n){return n.toHtmlString()}).join("")+"</"+e+">"}}}return n=n||{},{createElement:e,createTextNode:function(n){return{toHtmlString:function(){return n}}}}}},{"./common":1,"./utils":7}],7:[function(n,e,t){function r(n){if(!N(n))return[];if(Object.keys)return Object.keys(n);var e=[];for(var t in n)U(n,t)&&e.push(t);return e}function o(n){for(var e=e(n),t=e.length,r=Array(t),o=0;t>o;o++)r[o]=n[e[o]];return r}function i(n,e,t){if(null==n)return-1;var r=0,o=n.length;if(t){if("number"!=typeof t)return r=sortedIndex(n,e),n[r]===e?r:-1;r=0>t?Math.max(0,o+t):t}for(;o>r;r++)if(n[r]===e)return r;return-1}function u(n,e){if(null==n)return n;var t,r=n.length;if(r===+r)for(t=0;r>t;t++)e(n[t],t,n);else{var o=o(n);for(t=0,r=o.length;r>t;t++)e(n[o[t]],o[t],n)}return n}function a(n,e){if(null==n)return[];for(var t,r=n.length!==+n.length&&r(n),o=(r||n).length,i=Array(o),u=0;o>u;u++)t=r?r[u]:u,i[u]=e(n[t],t,n);return i}function c(n,e){var t=[];return null==n?t:(u(n,function(n,r,o){e(n,r,o)&&t.push(n)}),t)}function s(n,e,t){null==n&&(n=[]);var r,o=n.length!==+n.length&&o(n),i=(o||n).length,u=0;if(arguments.length<3){if(!i)throw new TypeError(reduceError);t=n[o?o[u++]:u++]}for(;i>u;u++)r=o?o[u]:u,t=e(t,n[r],r,n);return t}function f(n,e,t){return c(n,h(e),t)}function l(n,e){return c(n,d(e))}function d(n){var e=e(n),t=e.length;return function(n){if(null==n)return!t;n=new Object(n);for(var r=0;t>r;r++){var o=e[r],i=o[0];if(o[1]!==n[i]||!(i in n))return!1}return!0}}function p(n){return n}function m(n){return function(e){return e[n]}}function h(n){return function(){return!n.apply(this,arguments)}}function v(n){for(var e=e(n),t=e.length,r=Array(t),o=0;t>o;o++)r[o]=[e[o],n[e[o]]];return r}function g(n){function e(){return{value:function(){return t},map:function(n){return t=r.map(t,n),this},filter:function(n){return t=r.filter(t,n),this},each:function(n){return r.each(t,n),this},values:function(){return r.values()},keys:function(){return r.keys()},reduce:function(n,e,o){return r.reduce(t,n,e,o)},reject:function(n,e){return t=r.reject(t,n,e),this},where:function(n){return t=r.where(t,n),this}}}var t=n,r=this;return e()}function y(n,e){return null==n?!1:(n.length!==+n.length&&(n=o(n)),i(n,e)>=0)}function b(n){var e=++I+"";return n?n+e:e}function w(n,e){for(var t=[],r=0;n>r;r++)t.push(e(n));return t}function _(n){return N(n)?k(n)?n.slice():E({},n):n}function E(n){if(!N(n))return n;for(var e,t,r=1,o=arguments.length;o>r;r++){e=arguments[r];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])}return n}function S(n){return void 0===n}function k(n){return Array.isArray?Array.isArray(n):"[object Array]"===Object.prototype.toString.call(n)}function N(n){var e=typeof n;return"function"===e||"object"===e&&!!n}function x(n){return"[object Number]"===Object.prototype.toString.call(n)}function A(n){return"[object String]"===Object.prototype.toString.call(n)}function O(n){return n===!0||n===!1||"[object Boolean]"===Object.prototype.toString.call(n)}function C(n){return"[object RegExp]"===Object.prototype.toString.call(n)}function j(n){return"[object Function]"===Object.prototype.toString.call(n)}function M(n){return null===n}function T(n){return x(n)&&n!==+n}function U(n,e){return null!=n&&Object.prototype.hasOwnProperty.call(n,e)}function F(n){return n.replace(/([A-Z\d]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").toLowerCase().replace(/_/g,"-")}function H(n,e){return 0===n.indexOf(e)}function R(n){n.focus&&n.focus()}function q(n){return n===document.activeElement&&(!document.hasFocus||document.hasFocus())&&!!(n.type||n.href||~n.tabIndex)}function B(n,e,t){var r=A(n)?document.querySelector(n):n;u(e,function(n){r&&null!==r&&(r.addEventListener?r.addEventListener(n,t,!1):r.attachEvent&&r.addEventListener(n,t))})}function L(n,e,t){var r=A(n)?document.querySelector(n):n;u(e,function(n){r&&null!==r&&r.removeEventListener&&r.removeEventListener(n,t,!1)})}function D(n){return document.querySelector(n)}var I=0,W={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},z=function(n,e){var t=function(e){return n[e]},r="(?:"+e(n).join("|")+")",o=RegExp(r),i=RegExp(r,"g");return function(n){return n=null==n?"":""+n,o.test(n)?n.replace(i,t):n}};t.escape=z(W,r),t.keys=r,t.values=o,t.indexOf=i,t.each=u,t.map=a,t.filter=c,t.chain=g,t.contains=y,t.uniqueId=b,t.times=w,t.clone=_,t.extend=E,t.isUndefined=S,t.isArray=k,t.isObject=N,t.isNumber=x,t.isString=A,t.isBoolean=O,t.isRegExp=C,t.isFunction=j,t.isNull=M,t.isNaN=T,t.has=U,t.dasherize=F,t.startsWith=H,t.focus=R,t.hasFocus=q,t.on=B,t.off=L,t.findNode=D,t.reduce=s,t.reject=f,t.where=l,t.matches=d,t.negate=h,t.property=m,t.identity=p,t.pairs=v},{}],8:[function(n,e,t){function r(n,e){var t=document,r=Object.create(HTMLElement.prototype);r.createdCallback=function(){var n={};for(var r in this.attributes){var u=this.attributes[r];n[u.name]=u.value}this.props=n;var a=this;if("true"!==n.noshadow){var s=this.createShadowRoot();a=t.createElement("div"),a.setAttribute("class","elemcomponent"),s.appendChild(a)}this._node=a,this._id=i.uniqueId("WebComponent_"),this._internalBus=o(),this._internalBus._trigger=this._internalBus.trigger,this._internalBus.trigger=function(n,e){c.trigger("ElemEvent",{name:n,id:this._id,payload:e})}.bind(this),c.on("ElemEvent",function(n){var e=n.id;if(e!==this._id){var t=n.name,r=n.payload;this._internalBus._trigger(t,r)}}.bind(this)),n.componentsBus=this._internalBus,this.renderedElement=n.renderOnly&&n.renderOnly===!0?Elem.render(e,a):Elem.component({container:a,init:e.init,render:e.render,props:n,state:e.state})},r.attributeChangedCallback=function(n,t,r){this.props[n]=r;var o=this.props;this.renderedElement=this.props.renderOnly&&this.props.renderOnly===!0?Elem.render(e,this._node):Elem.component({container:this._node,init:e.init,render:e.render,props:o,state:e.state})},u(n,{prototype:r})}var o=n("./events"),i=n("./utils"),u=void 0;try{u=(document.registerElement||document.register||function(){window.console&&console.error("[ELEMJS] No registerElement function, webcomponents will not work !!!")}).bind(document)}catch(a){}var c=o();t.registerWebComponent=u?r:function(){window.console&&console.error("[ELEMJS] WebComponent not available here :(")}},{"./events":4,"./utils":7}]},{},[3])(3)});
//# sourceMappingURL=elem.min.map