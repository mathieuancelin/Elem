{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap f86b7d2d28e46d731adf","webpack:///./src/elem.js","webpack:///./src/common.js","webpack:///./src/utils.js","webpack:///./src/component.js","webpack:///./src/state.js","webpack:///./src/webcomponent.js","webpack:///./src/stringify.js","webpack:///./src/events.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,wC;;;;;;;;;;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA8C;AAC9C,UAAS;AACT;AACA;AACA,MAAK;AACL,uDAAsD,6BAA6B,EAAE;AACrF;AACA;;AAEA,+BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL,uDAAsD,6BAA6B,EAAE;AACrF;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA,MAAK;AACL;;AAEA,mCAAkC,SAAS,0BAA0B;;AAErE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA,kBAAiB;AACjB;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA,kBAAiB;AACjB;AACA,kBAAiB;AACjB;AACA,kBAAiB;AACjB;AACA,kBAAiB;AACjB;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,gDAA+C,WAAW;AAC1D;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA,cAAa;AACb;AACA,cAAa;AACb;AACA,cAAa;AACb,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA,0EAAyE,yBAAyB,EAAE;AACpG;AACA;AACA;;AAEA;;AAEA,yCAAwC,mBAAmB,YAAY,GAAG;;AAE1E,sCAAqC,4BAA4B,GAAG;;AAEpE,iCAAgC,oBAAoB,2CAA2C,eAAe,EAAE,EAAE,GAAG,EAAE;;AAEvH,gCAA+B,qBAAqB,QAAQ;;AAE5D,gCAA+B,yCAAyC,aAAa,EAAE,EAAE;;AAEzF;AACA;AACA,yCAAwC;AACxC,8BAA6B;AAC7B,+BAA8B;AAC9B,2CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA8C,+GAA+G;AAC7J,6EAA4E,mCAAmC;AAC/G;AACA;AACA,UAAS;AACT,oDAAmD;AACnD,wDAAuD;AACvD;AACA,8CAA6C;AAC7C,kBAAiB;AACjB,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,qBAAqB,EAAE;AAC9C,uBAAsB,qBAAqB,EAAE;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,uBAAsB;AACtB;AACA,+BAA8B;AAC9B;AACA,MAAK;AACL;;AAEA;;AAEA;AACA;AACA;AACA,MAAK;AACL;;;;;;;;;;AC1TA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,sBAAqB;AACrB,yBAAwB;AACxB,iCAAgC,WAAW,EAAE;AAC7C,iCAAgC,WAAW,EAAE;AAC7C,4BAA2B;AAC3B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAsB;AACtB,yBAAwB;AACxB,yBAAwB;AACxB,yBAAwB;AACxB,yB;AACA;AACA;;AAEA;AACA;AACA;AACA,qC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,U;AACA,MAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,E;;;;;;;;;ACjIA;;AAEA;AACA,gBAAe;AACf,eAAc;AACd,eAAc;AACd,iBAAgB;AAChB,iBAAgB;AAChB,iBAAgB;AAChB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,oBAAmB,YAAY;AAC/B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA,WAAU,YAAY;AACtB;AACA;;AAEA;AACA;AACA;AACA;AACA,oBAAmB,YAAY;AAC/B;AACA;AACA,MAAK;AACL;AACA,0CAAyC,YAAY;AACrD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,gBAAgB;AACvC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAU,gBAAgB;AAC1B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,YAAY;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,oBAAmB,YAAY;AAC/B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA,cAAa;AACb;AACA;AACA,cAAa;AACb;AACA;AACA,cAAa;AACb;AACA;AACA,cAAa;AACb;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,E;;AAEA;AACA;AACA,oBAAmB,OAAO;AAC1B;AACA;AACA;AACA;;AAEA;AACA;AACA,kDAAiD;AACjD;;AAEA;AACA;AACA;AACA,+CAA8C,YAAY;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,qC;AACA,wC;AACA;;AAEA,uB;AACA;AACA;;AAEA,0B;AACA,2I;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,gEAA+D;AAC/D,cAAa;AACb,yDAAwD;AACxD;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA,mEAAkE;AAClE;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uB;;;;;;;;;ACnXA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,wB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAwC;AACxC,yDAAwD;AACxD,6CAA4C;AAC5C,uDAAsD;AACtD,+CAA8C;AAC9C,gCAA+B,uBAAuB;AACtD,qCAAoC;AACpC;AACA;AACA,sDAAqD;AACrD;AACA,mC;AACA,QAAO;AACP,6FAA4F;AAC5F;AACA,sEAAqE;AACrE,4DAA2D;AAC3D;AACA;AACA;AACA,uC;AACA;AACA;AACA;AACA;AACA;AACA,qCAAoC,SAAS,0BAA0B;AACvE,qBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA,gDAA+C;AAC/C,qFAAoF;AACpF;AACA;AACA,4CAA2C,qBAAqB,EAAE;AAClE;AACA,4CAA2C,qCAAqC;AAChF;AACA,yDAAwD,qCAAqC;AAC7F;AACA,sCAAqC,yGAAyG;AAC9I,2CAA0C,qCAAqC;AAC/E;AACA,8EAA6E;AAC7E,8BAA6B,sBAAsB;AACnD,iCAAgC;AAChC,0DAAyD;AACzD,iEAAgE,wDAAwD;AACxH;AACA;AACA;AACA;AACA;AACA,uCAAsC,iBAAiB,a;AACvD;AACA,QAAO;AACP;AACA;AACA;AACA,4BAA2B;AAC3B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAkB,kCAAkC;AACpD;AACA;AACA;AACA,qDAAoD,sCAAsC,EAAE;AAC5F;AACA,gDAA+C,qGAAqG;AACpJ,uCAAsC,sCAAsC,EAAE;AAC9E;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAqD,cAAc;AACnE,+C;AACA,QAAO;AACP;AACA;AACA,sDAAqD,cAAc;AACnE;AACA,QAAO;AACP;AACA;AACA,sDAAqD,cAAc;AACnE;AACA;AACA;AACA,YAAW;AACX,UAAS;AACT;AACA;AACA;AACA;AACA;AACA,gB;AACA,I;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,gDAA+C,cAAc;AAC7D;AACA,G;;;;;;;;;ACjKA;;AAEA;;AAEA,6BAA4B,WAAW;;AAEvC;;AAEA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,uDAAsD;AACtD;AACA,MAAK;AACL;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,IAAG;AACH,G;;;;;;;;;;ACjDA;;AAEA;AACA;AACA;AACA,IAAG;AACH,EAAC;;AAED;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,qC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sD;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,QAAO,E;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA,4D;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;;AAEA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;;;;;;;;;;ACpEA;AACA;;AAEA;AACA;AACA,0B;AACA;AACA;AACA;AACA,iD;AACA;AACA;AACA,yE;AACA;AACA,kBAAiB;AACjB,0D;AACA;AACA,cAAa;AACb,2CAA0C,sBAAsB,EAAE;AAClE;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA0C,cAAc;AACxD;AACA,U;AACA;AACA;;;;;;;;;;ACpCA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,QAAO,E;AACP,MAAK,E;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA,uBAAsB,iCAAiC;AACvD,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP,MAAK;AACL;AACA,G","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Elem\"] = factory();\n\telse\n\t\troot[\"Elem\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap f86b7d2d28e46d731adf\n **/","var Common = require('./common');\nvar _ = require('./utils');\nvar Components = require('./component');\nvar state = require('./state');\nvar registerWebComponent = require('./webcomponent').registerWebComponent;\nvar Stringifier = require('./stringify');\nvar Dispatcher = require('./events');\n\nfunction styleToString(attrs) {\n    if (_.isUndefined(attrs)) return '';\n    var attrsArray = _.map(_.keys(attrs), function(key) {\n        var keyName = _.dasherize(key);\n        if (key === 'className') {\n            keyName = 'class';\n        }\n        var value = attrs[key];\n        if (!_.isUndefined(value) && _.isFunction(value)) {\n            value = value();\n        }\n        if (!_.isUndefined(value)) {\n            return keyName + ': ' + value + ';';\n        } else {\n            return undefined;\n        }\n    });\n    attrsArray = _.filter(attrsArray, function(item) { return !_.isUndefined(item); });\n    return attrsArray.join(' ');\n}\n\nfunction classToArray(attrs) { /* Handle class as object with boolean values */\n    if (_.isUndefined(attrs)) return [];\n    var attrsArray = _.map(_.keys(attrs), function(key) {\n        var value = attrs[key];\n        if (!_.isUndefined(value) && value === true) {\n            return _.dasherize(key);\n        } else {\n            return undefined;\n        }\n    });\n    attrsArray = _.filter(attrsArray, function(item) { return !_.isUndefined(item); });\n    return attrsArray;\n}\n\nfunction wrapChildren(children) {\n    if (children === 0) {\n        return children;\n    } else if (children === '') {\n        return [];\n    }\n    return children || [];\n}\n\nfunction buildRef(id) {\n    return {\n        getDOMNode: function() {\n            return _.findNode('[data-nodeid=\"' + id + '\"]');\n        }\n    };\n}\n\nfunction extractEventHandlers(attrs, nodeId, context) {\n    _.each(_.keys(attrs), function(key) {\n        var keyName = _.dasherize(key);\n        if (_.startsWith(keyName, 'on')) {\n            if (context && context.waitingHandlers) {\n                context.waitingHandlers.push({\n                    root: context.root,\n                    id: nodeId,\n                    event: keyName,\n                    callback: attrs[key]\n                });\n            }\n        }\n        if (keyName === 'ref' && context && context.refs) context.refs[attrs[key]] = buildRef(nodeId);\n    });\n}\n\nfunction asAttribute(key, value) { return { key: key, value: value }; }\n\nfunction attributesToArray(attrs) {\n    if (_.isUndefined(attrs)) return [];\n    var attrsArray = [];\n    _.each(_.keys(attrs), function(key) {\n        var keyName = _.dasherize(key);\n        if (key === 'className') {\n            keyName = 'class';\n        }\n        if (!_.startsWith(keyName, 'on') && keyName !== 'ref') {\n            var value = attrs[key];\n            if (!_.isUndefined(value) && _.isFunction(value)) {\n                value = value();\n            }\n            if (!_.isUndefined(value)) {\n                if (_.isObject(value) && keyName === 'style') {\n                    attrsArray.push(asAttribute('style', styleToString(value)));\n                } else if (_.isArray(value) && keyName === 'class') {\n                    attrsArray.push(asAttribute(keyName, value.join(' ')));\n                } else if (_.isObject(value) && keyName === 'class') {\n                    attrsArray.push(asAttribute(keyName, classToArray(value).join(' ')));\n                } else {\n                    attrsArray.push(asAttribute(keyName, value));\n                }\n            }\n        }\n    });\n    return attrsArray;\n}\n\nfunction el(name, attrs, children) {\n    var nodeId = _.uniqueId('node_');\n    if (_.isUndefined(children) && !_.isUndefined(attrs) && !attrs.__isAttrs) {\n        children = attrs;\n        attrs = {};\n    }\n    if (arguments.length > 3) {\n      name = arguments[0];\n      if (!attrs.isElement) {\n        attrs = arguments[1];\n      } else {\n        attrs = {};\n      }\n      children = [].concat(arguments);\n      children.shift();\n      children.shift();\n    }\n    name = _.escape(name) || 'unknown';\n    attrs = attrs || {};\n    children = wrapChildren(children);\n    if (_.isRegExp(children) || _.isUndefined(children) || _.isNull(children)) children = [];\n    if (_.isArray(children)) {\n        children = _.chain(children).map(function(child) {\n            if (_.isFunction(child)) {\n                return child();\n            } else {\n                return child;\n            }\n        }).filter(function(item) {\n            return !_.isUndefined(item);\n        }).value();\n    }\n    var selfCloseTag = _.contains(Common.voidElements, name.toUpperCase())\n        && (_.isNull(children) || _.isUndefined(children) || (_.isArray(children) && children.length === 0));\n    var attrsArray = attributesToArray(attrs);\n    attrsArray.push(asAttribute('data-nodeid', _.escape(nodeId)));\n    if (Common.debug) attrsArray.push(asAttribute('title', _.escape(nodeId)));\n    return {\n        name: name,\n        attrs: attrs,\n        children: children,\n        isElement: true,\n        nodeId: nodeId,\n        toJsonString: function(pretty) {\n            if (pretty) return JSON.stringify(this, null, 2);\n            return JSON.stringify(this);\n        },\n        toHtmlNode: function(doc, context) {\n            extractEventHandlers(attrs, nodeId, context);\n            var element = doc.createElement(_.escape(name));\n            _.each(attrsArray, function(item) {\n                element.setAttribute(item.key, item.value);\n            });\n            function appendSingleNode(__children, __element) {\n                if (_.isNumber(__children)) {\n                    __element.appendChild(doc.createTextNode(__children + ''));\n                } else if (_.isString(__children)) {\n                    __element.appendChild(doc.createTextNode(__children));\n                } else if (_.isBoolean(__children)) {\n                    __element.appendChild(doc.createTextNode(__children + ''));\n                } else if (_.isObject(__children) && __children.isElement) {\n                    __element.appendChild(__children.toHtmlNode(doc, context));\n                } else if (_.isObject(__children) && __children.__asHtml) {\n                    __element.innerHTML = __children.__asHtml;\n                } else if (__children.__componentFactory) {\n                    var compId = _.escape(_.uniqueId('component_'));\n                    var span = doc.createElement('span');\n                    span.setAttribute('data-componentid', compId);\n                    __element.appendChild(span);\n                    context.__innerComponents.push('[data-componentid=\"' + compId + '\"]');\n                    __children.renderTo('[data-componentid=\"' + compId + '\"]', true);\n                } else {\n                    __element.appendChild(doc.createTextNode(__children.toString()));\n                }\n            }\n            if (!selfCloseTag) {\n                if (_.isArray(children)) {\n                    _.each(children, function(child) {\n                        appendSingleNode(child, element);\n                    });\n                } else {\n                    appendSingleNode(children, element);\n                }\n            }\n            return element;\n        }\n    };\n}\n\nfunction renderToNode(el, doc, context) {\n    if (_.isFunction(el)) el = el((context || { props: {}}).props)\n    if (!_.isUndefined(el)) {\n        if (_.isArray(el)) {\n            return _.chain(el).map(function(item) {\n                if (_.isFunction(item)) {\n                    return item();\n                } else {\n                    return item;\n                }\n            }).filter(function (item) {\n                return !_.isUndefined(item);\n            }).map(function (item) {\n                return item.toHtmlNode(doc, context);\n            }).value();\n        } else {\n            return [el.toHtmlNode(doc, context)];\n        }\n    } else {\n        return [];\n    }\n}\n\nexports.renderToString = function(el, context) {\n    Common.markStart('Elem.renderToString');\n    var str = _.map(renderToNode(el, Stringifier(context)), function(n) { return n.toHtmlString(); }).join('');\n    Common.markStop('Elem.renderToString');\n    return str;\n};\n\nexports.el = el;\n\nexports.sel = function(name, children) { return el(name, {}, children); }; // simple node sel(name, children)\n\nexports.vel = function(name, attrs) { return el(name, attrs, []); }; // void node, cel(name, attrs)\n\nexports.nbsp = function(times) { return el('span', { __asHtml: _.times(times || 1, function() { return '&nbsp;'; }) }); };\n\nexports.text = function(text) { return el('span', {}, text); };\n\nexports.elements = function() { return _.map(arguments, function(item) { return item; }); };\n\nexports.render = function(el, node, context) {\n    Common.markStart('Elem.render');\n    var waitingHandlers = (context || {}).waitingHandlers || [];\n    var refs = (context || {}).refs || {};\n    var props = (context || {}).props || {};\n    var __innerComponents = (context || {}).__innerComponents || [];\n    var doc = document;\n    if (node.ownerDocument) {\n        doc = node.ownerDocument;\n    }\n    if (_.isString(node)) {\n        node = doc.querySelector(node);\n    }\n    if (!_.isUndefined(node) && !_.isNull(node)) {\n        var htmlNode = renderToNode(el, doc, { root: node, waitingHandlers: waitingHandlers, refs: refs, props: props, __innerComponents: __innerComponents });\n        while (!_.isUndefined(node) && !_.isNull(node) && node.firstChild) { node.removeChild(node.firstChild); }\n        _.each(htmlNode, function(n) {\n            if (!_.isUndefined(node) && !_.isNull(node)) node.appendChild(n);\n        });\n        if (!(context && context.__rootListener)) {  // external listener here\n            _.each(waitingHandlers, function(handler) { // handler on each concerned node\n                _.on('[data-nodeid=\"' + handler.id + '\"]', [handler.event.replace('on', '')], function() {\n                    handler.callback.apply({}, arguments);\n                });\n            });\n        }\n    }\n    Common.markStop('Elem.render');\n};\nexports.unmountComponent = Components.unmountComponent;\nexports.component = Components.component;\nexports.componentToString = Components.componentToString;\nexports.state = state;\nexports.Utils = _;\nexports.registerWebComponent = registerWebComponent;\nexports.dispatcher = Dispatcher;\nexports.Perf = {\n    start: function() { Common.perfs = true; },\n    stop: function() { Common.stop = false; },\n    markStart: Common.markStart,\n    markStop: Common.markStop,\n    collectMeasures: Common.collectMeasures,\n    printMeasures: Common.printMeasures\n};\nexports.defer = Common.defer;\nexports.predicate = function(predicate, what) {\n    if (_.isFunction(predicate)) {\n        if (predicate() === true) {\n            return what;\n        } else {\n            return undefined;\n        }\n    } else {\n        if (predicate === true) {\n            return what;\n        } else {\n            return undefined;\n        }\n    }\n};\nexports.p = exports.predicate;\nexports.cssClass = function(obj) {\n    return _.extend({}, {\n        extend: function(o) {\n            return _.extend({}, o, obj);\n        }\n    }, obj);\n};\n\nCommon.__internal.Elem = exports;\n\nif (typeof define === 'function' && define.amd) {\n    define('elem', [], function() {\n        return module.exports;\n    });\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/elem.js\n ** module id = 0\n ** module chunks = 0\n **/","var _ = require('./utils');\n\nexports.debug = false;\nexports.perfs = false;\nexports.voidElements = [\"AREA\",\"BASE\",\"BR\",\"COL\",\"COMMAND\",\"EMBED\",\"HR\",\"IMG\",\"INPUT\",\"KEYGEN\",\"LINK\",\"META\",\"PARAM\",\"SOURCE\",\"TRACK\",\"WBR\"];\nexports.events = ['wheel','scroll','touchcancel','touchend','touchmove','touchstart','click','doubleclick','drag','dragend','dragenter','dragexit','dragleave','dragover','dragstart','drop','change','input','submit','focus','blur','keydown','keypress','keyup','copy','cut','paste','mousedown','mouseenter','mouseleave','mousemove','mouseout','mouseover','mouseup'];\n    \n// redraw with requestAnimationFrame (https://developer.mozilla.org/fr/docs/Web/API/window.requestAnimationFrame)\n// perfs measures (http://www.html5rocks.com/en/tutorials/webperformance/usertiming/)\nvar Performances = {\n  mark: function() {},\n  measure: function() {},\n  getEntriesByName: function() { return []; },\n  getEntriesByType: function() { return []; },\n  clearMarks: function() {},\n  clearMeasures: function() {}\n};\n\n// Avoid some issues in non broser environments\nif (typeof window === 'undefined') {\n  window = {\n    __fake: true\n  };\n}\n// Avoid some issues in older browsers\nif (typeof window.console === 'undefined') {\n  window.console = {\n    log: function() {},\n    error: function() {},\n    table: function() {},\n    debug: function() {},\n    trace: function() {} \n  };\n}\n\nif (typeof window.performance !== 'undefined' \n    && typeof window.performance.mark !== 'undefined' \n    && typeof window.performance.measure !== 'undefined') {\n  Performances = window.performance;  \n}\n\nwindow.requestAnimationFrame = \n    window.requestAnimationFrame || \n    window.mozRequestAnimationFrame ||\n    window.webkitRequestAnimationFrame || \n    window.msRequestAnimationFrame || \n    (function() {\n        if (window.console) console.error('[ELEMJS] No requestAnimationFrame, using lame polyfill ...');\n        return function(callback, element){\n            window.setTimeout(callback, 1000 / 60);\n        }    \n    })();\n\nvar ElemMeasureStart = 'ElemMeasureStart';\nvar ElemMeasureStop = 'ElemMeasureStop';\nvar ElemMeasure = 'ElemComponentRenderingMeasure';\nvar names = [ElemMeasure];\n\nexports.markStart = function(name) {\n  if (exports.perfs) {\n    if (name) {\n      Performances.mark(name + '_start');\n    } else {\n      Performances.mark(ElemMeasureStart);\n    }\n  }\n};\n\nexports.markStop = function(name) {\n  if (exports.perfs) {\n    if (name) {\n      Performances.mark(name + '_stop');\n      Performances.measure(name, name + '_start', name + '_stop');\n      if (!_.contains(names, name)) names.push(name);\n    } else {\n      Performances.mark(ElemMeasureStop);\n      Performances.measure(ElemMeasure, ElemMeasureStart, ElemMeasureStop);\n    }\n  }\n};\n\nexports.collectMeasures = function() {\n  if (!exports.perfs) return [];\n  var results = [];\n  _.each(names, function(name) {\n    results = results.concat(Performances.getEntriesByName(name));\n  });\n  Performances.clearMarks();\n  Performances.clearMeasures();\n  names = [ElemMeasure];\n  return results;\n};\n\nexports.printMeasures = function() {\n  if (!exports.perfs) return;\n  if (window.console) console.table(exports.collectMeasures());\n};\n\nexports.defer = function(cb) {\n    window.requestAnimationFrame.call(window, cb);\n};\n\nexports.defered = function(cb) {\n    return function() {\n        exports.defer(cb);\n    };\n};\n\nexports.__internal = {};\n\nif (!Function.prototype.bind) {\n  if (window.console) console.error('[ELEMJS] No Function.prototype.bind, using polyfill ...');\n  Function.prototype.bind = function (oThis) {\n    if (typeof this !== \"function\") {\n      throw new TypeError(\"Function.prototype.bind - can't call bounded element\");\n    }\n    var aArgs = Array.prototype.slice.call(arguments, 1);\n    var fToBind = this; \n    var fNOP = function () {};\n    var fBound = function () {\n        return fToBind.apply(this instanceof fNOP && oThis\n                 ? this\n                 : oThis,\n                 aArgs.concat(Array.prototype.slice.call(arguments)));\n    };\n    fNOP.prototype = this.prototype;\n    fBound.prototype = new fNOP();\n    return fBound;\n  };\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/common.js\n ** module id = 1\n ** module chunks = 0\n **/","var __idCounter = 0;\n\nvar escapeMap = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#x27;',\n    '`': '&#x60;'\n};\n\nvar createEscaper = function(map, keys) {\n    var escaper = function(match) {\n        return map[match];\n    };\n    var source = '(?:' + keys(map).join('|') + ')';\n    var testRegexp = RegExp(source);\n    var replaceRegexp = RegExp(source, 'g');\n    return function(string) {\n        string = string == null ? '' : '' + string;\n        return testRegexp.test(string) ? string.replace(replaceRegexp, escaper) : string;\n    };\n};\n\nfunction keys(obj) {\n    if (!isObject(obj)) return [];\n    if (Object.keys) return Object.keys(obj);\n    var keys = [];\n    for (var key in obj) if (has(obj, key)) keys.push(key);\n    return keys;\n}\n\nfunction values(obj) {\n    var keys = keys(obj);\n    var length = keys.length;\n    var values = Array(length);\n    for (var i = 0; i < length; i++) {\n        values[i] = obj[keys[i]];\n    }\n    return values;\n}\n\nfunction indexOf(array, item, isSorted) {\n    if (array == null) return -1;\n    var i = 0, length = array.length;\n    if (isSorted) {\n        if (typeof isSorted == 'number') {\n            i = isSorted < 0 ? Math.max(0, length + isSorted) : isSorted;\n        } else {\n            i = sortedIndex(array, item);\n            return array[i] === item ? i : -1;\n        }\n    }\n    for (; i < length; i++) if (array[i] === item) return i;\n    return -1;\n}\n\nfunction each(obj, func) {\n    if (obj == null) return obj;\n    var i, length = obj.length;\n    if (length === +length) {\n        for (i = 0; i < length; i++) {\n            func(obj[i], i, obj);\n        }\n    } else {\n        var keys = keys(obj);\n        for (i = 0, length = keys.length; i < length; i++) {\n            func(obj[keys[i]], keys[i], obj);\n        }\n    }\n    return obj;\n}\n\nfunction map(obj, func) {\n    if (obj == null) return [];\n    var keys = obj.length !== +obj.length && keys(obj),\n        length = (keys || obj).length,\n        results = Array(length),\n        currentKey;\n    for (var index = 0; index < length; index++) {\n        currentKey = keys ? keys[index] : index;\n        results[index] = func(obj[currentKey], currentKey, obj);\n    }\n    return results;\n}\n\nfunction filter(obj, predicate) {\n    var results = [];\n    if (obj == null) return results;\n    each(obj, function(value, index, list) {\n        if (predicate(value, index, list)) results.push(value);\n    });\n    return results;\n}\n\nfunction reduce(obj, iteratee, memo, context) {\n    if (obj == null) obj = [];\n    var keys = obj.length !== +obj.length && keys(obj),\n        length = (keys || obj).length,\n        index = 0,\n        currentKey;\n    if (arguments.length < 3) {\n        if (!length) throw new TypeError(reduceError);\n        memo = obj[keys ? keys[index++] : index++];\n    }\n    for (; index < length; index++) {\n        currentKey = keys ? keys[index] : index;\n        memo = iteratee(memo, obj[currentKey], currentKey, obj);\n    }\n    return memo;\n}\n\nfunction reject(obj, predicate, context) {\n    return filter(obj, negate(predicate), context);\n}\n\nfunction where(obj, attrs) {\n    return filter(obj, matches(attrs));\n}\n\nfunction matches(attrs) {\n    var pairs = pairs(attrs),\n        length = pairs.length;\n    return function(obj) {\n        if (obj == null) return !length;\n        obj = new Object(obj);\n        for (var i = 0; i < length; i++) {\n            var pair = pairs[i],\n                key = pair[0];\n            if (pair[1] !== obj[key] || !(key in obj)) return false;\n        }\n        return true;\n    };\n}\n\nfunction identity(value) {\n    return value;\n}\n\nfunction property(key) {\n    return function(obj) {\n        return obj[key];\n    };\n}\n\nfunction negate(predicate) {\n    return function() {\n        return !predicate.apply(this, arguments);\n    };\n}\n\nfunction pairs(obj) {\n    var keys = keys(obj);\n    var length = keys.length;\n    var pairs = Array(length);\n    for (var i = 0; i < length; i++) {\n        pairs[i] = [keys[i], obj[keys[i]]];\n    }\n    return pairs;\n}\n\nfunction chain(obj) {\n    var internalObj = obj;\n    var under = this;\n    function chainableApi() {\n        return {\n            value: function() {\n                return internalObj;\n            },\n            map: function(func) {\n                internalObj = under.map(internalObj, func);\n                return this;\n            },\n            filter: function(func) {\n                internalObj = under.filter(internalObj, func);\n                return this;\n            },\n            each: function(func) {\n                under.each(internalObj, func);\n                return this;\n            },\n            values: function() {\n                return under.values();\n            },\n            keys: function() {\n                return under.keys();\n            },\n            reduce: function(iteratee, memo, context) {\n                return under.reduce(internalObj, iteratee, memo, context);\n            },\n            reject: function(predicate, context) {\n                internalObj = under.reject(internalObj, predicate, context);\n                return this;\n            },\n            where: function(attrs) {\n                internalObj = under.where(internalObj, attrs);\n                return this;\n            }\n        };\n    }\n    return chainableApi();\n}\n\nfunction contains(obj, target) {\n    if (obj == null) return false;\n    if (obj.length !== +obj.length) obj = values(obj);\n    return indexOf(obj, target) >= 0;\n}\n\nfunction uniqueId(prefix) {\n    var id = ++__idCounter + '';\n    return prefix ? prefix + id : id;\n}  \n\nfunction times(n, func) {\n    var results = [];\n    for (var i = 0; i < n; i++) {\n        results.push(func(n));\n    }\n    return results;\n}\n\nfunction clone(obj) {\n    if (!isObject(obj)) return obj;\n    return isArray(obj) ? obj.slice() : extend({}, obj);\n}\n\nfunction extend(obj) {\n    if (!isObject(obj)) return obj;\n    var source, prop;\n    for (var i = 1, length = arguments.length; i < length; i++) {\n        source = arguments[i];\n        for (prop in source) {\n            if (Object.prototype.hasOwnProperty.call(source, prop)) {\n                obj[prop] = source[prop];\n            }\n        }\n    }\n    return obj;\n}\n\nfunction isUndefined(obj) {\n    return obj === void 0;\n}\n\nfunction isArray(obj) {\n    if (Array.isArray) return Array.isArray(obj);\n    return Object.prototype.toString.call(obj) === '[object Array]';\n}\n\nfunction isObject(obj) {\n    var type = typeof obj;\n    return type === 'function' || type === 'object' && !!obj;\n}\n\nfunction isNumber(obj) {\n    return Object.prototype.toString.call(obj) === '[object Number]';\n}\n\nfunction isString(obj) {\n    return Object.prototype.toString.call(obj) === '[object String]';\n}\n\nfunction isBoolean(obj) {\n    return obj === true || obj === false || Object.prototype.toString.call(obj) === '[object Boolean]';\n}\n\nfunction isRegExp(obj) {\n    return Object.prototype.toString.call(obj) === '[object RegExp]';\n}\n\nfunction isFunction(obj) {\n    return Object.prototype.toString.call(obj) === '[object Function]';\n}\n\nfunction isNull(obj) {\n    return obj === null;\n}\n\nfunction isNaN(obj) {\n    return isNumber(obj) && obj !== +obj;\n}\n\nfunction has(obj, key) {\n    return obj != null && Object.prototype.hasOwnProperty.call(obj, key);\n}\n\nfunction dasherize(what) {\n    return what.replace(/([A-Z\\d]+)([A-Z][a-z])/g,'$1_$2')\n        .replace(/([a-z\\d])([A-Z])/g,'$1_$2')\n        .toLowerCase().replace(/_/g, '-');\n}\n\nfunction startsWith(source, start) { \n    return source.indexOf(start) === 0; \n}\n\nfunction focus(elem) { \n    if (elem.focus) elem.focus();\n}\n\nfunction hasFocus(elem) { \n    return elem === document.activeElement && (!document.hasFocus || document.hasFocus()) && !!(elem.type || elem.href || ~elem.tabIndex); \n}\n\nfunction on(node, types, callback) {\n    var actual = isString(node) ? document.querySelector(node) : node;\n    each(types, function(type) {\n        if (actual && actual !== null) {\n            if (actual.addEventListener) {\n                actual.addEventListener(type, callback, false); // does not work in ff 3.5 without false\n            } else if (actual.attachEvent) {\n                actual.addEventListener(type, callback); // work in ie\n            }\n        }\n    });\n}\n\nfunction off(node, types, callback) {\n    var actual = isString(node) ? document.querySelector(node) : node;\n    each(types, function(type) {\n        if (actual && actual !== null) {\n            if (actual.removeEventListener) {\n                actual.removeEventListener(type, callback, false); // does not work in ff 3.5 without false\n            }\n        }\n    });\n}\n\nfunction findNode(selector) {\n    return document.querySelector(selector);\n}\n\nexports.escape = createEscaper(escapeMap, keys);\nexports.keys = keys;\nexports.values = values;\nexports.indexOf = indexOf;\nexports.each = each;\nexports.map = map;\nexports.filter = filter;\nexports.chain = chain;\nexports.contains = contains;\nexports.uniqueId = uniqueId;\nexports.times = times;\nexports.clone = clone;\nexports.extend = extend;\nexports.isUndefined = isUndefined;\nexports.isArray = isArray;\nexports.isObject = isObject;\nexports.isNumber = isNumber;\nexports.isString = isString;\nexports.isBoolean = isBoolean;\nexports.isRegExp = isRegExp;\nexports.isFunction = isFunction;\nexports.isNull = isNull;\nexports.isNaN = isNaN;\nexports.has = has;\nexports.dasherize = dasherize;\nexports.startsWith = startsWith;\nexports.focus = focus;\nexports.hasFocus = hasFocus;\nexports.on = on;\nexports.off = off;\nexports.findNode = findNode;\nexports.reduce = reduce;\nexports.reject = reject;\nexports.where = where;\nexports.matches = matches;\nexports.negate = negate;\nexports.property = property;\nexports.identity = identity;\nexports.pairs = pairs;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/utils.js\n ** module id = 2\n ** module chunks = 0\n **/","var Common = require('./common');\nvar _ = require('./utils');\nvar Elem = Common.__internal.Elem;\nvar mounted = {};\n\nfunction hasData(node, name) {\n  return node.attributes && node.attributes['data-' + name];\n}\n\nfunction data(node, name) {\n  if (node.dataset) return node.dataset[name];\n  return node.attributes['data-' + name];\n}\n\nfunction unmountComponent(el) {\n  if (mounted[el]) {\n    mounted[el]();\n    delete mounted[el]; \n    // TODO : find a way to remove all listeners\n  }\n}\n\nfunction mountComponent(el, opts) {\n  var name = opts.name || 'Component';\n  var state = opts.state || Elem.state();\n  var props = opts.props || {};\n  var eventCallbacks = {};\n  var oldHandlers = [];\n  var innerComponents = [];\n  var init = (opts.init || function() {}).bind(opts);\n  var beforeRender = (opts.beforeRender || function() {}).bind(opts);\n  var render = (opts.render || function() {}).bind(opts);\n  var afterRender = (opts.afterRender || function() {}).bind(opts);\n  var unmount = (opts.unmount || function() {}).bind(opts);\n  var getDOMNode = function() { return _.findNode(el); };\n  var eventsCallback = function(e) { // bubbles listener, TODO : handle mouse event in a clever way\n      e = e || window.event;\n      var node = e.target || e.srcElement;\n      var name = data(node, 'nodeid') + '_' + e.type; //node.dataset.nodeid + \"_\" + e.type;\n      if (eventCallbacks[name]) {\n          eventCallbacks[name](e);    \n      } else {\n          while(!eventCallbacks[name] && node && node !== null && hasData(node, 'nodeid')) {//node.dataset && node.dataset.nodeid) {\n              node = node.parentElement;\n              if (node && node !== null && hasData(node, 'nodeid')) { //node.dataset && node.dataset.nodeid) {\n                name = data(node, 'nodeid') + '_' + e.type; //node.dataset.nodeid + \"_\" + e.type;\n              }\n          }\n          if (eventCallbacks[name]) {\n              eventCallbacks[name](e);    \n          }\n      }\n  };\n  unmountComponent(el);\n  mounted[el] = function() {\n    unmount(state, _.clone(props), { refs: {}, getDOMNode: getDOMNode });\n    state.replace({}, true);\n    _.off(el, Common.events, eventsCallback);\n  };\n  init(state, _.clone(props));\n  _.on(el, Common.events, eventsCallback);\n  function rerender() {\n      Common.markStart(name + '.globalRendering');\n      _.each(oldHandlers, function(handler) {\n          delete eventCallbacks[handler];\n      });\n      oldHandlers = [];\n      var focus = document.activeElement || {}; // TODO : check if input/select/textarea, remember cursor position here\n      var key = focus.dataset ? focus.dataset.key : (focus.attributes || [])['key']; // TODO : maybe a bug here\n      var refs = {};\n      var waitingHandlers = [];\n      _.each(innerComponents, function(c) { unmountComponent(c); });\n      innerComponents = [];\n      beforeRender(state, _.clone(props), { refs: refs, getDOMNode: getDOMNode });\n      Common.markStart(name + '.render');\n      var elemToRender = render(state, _.clone(props), { refs: refs, getDOMNode: getDOMNode });\n      Common.markStop(name + '.render');\n      Elem.render(elemToRender, el, { waitingHandlers: waitingHandlers, __rootListener: true, refs: refs, __innerComponents: innerComponents });\n      afterRender(state, _.clone(props), { refs: refs, getDOMNode: getDOMNode });\n      if (key) {\n          var focusNode = document.querySelector('[data-key=\"' + key + '\"]');//$('[data-key=\"' + key + '\"]');\n          _.focus(focusNode); // focusNode.focus();  // TODO : maybe a bug here\n          if (focusNode.value) { //focusNode.val()) {\n              var strLength = focusNode.value.length * 2; // focusNode.val().length * 2;\n              focusNode.setSelectionRange(strLength, strLength); //focusNode[0].setSelectionRange(strLength, strLength);  // TODO : handle other kind of input ... like select, etc ...   \n          }\n      }\n      _.each(waitingHandlers, function(handler) {\n          oldHandlers.push(handler.id + '_' + handler.event.replace('on', ''));\n          eventCallbacks[handler.id + '_' + handler.event.replace('on', '')] = function() {\n              handler.callback.apply({ render: render }, arguments);                        \n          }\n      });\n      Common.markStop(name + '.globalRendering');\n  }\n  rerender();\n  state.onChange(rerender);//Common.defered(rerender));\n  return state;\n}\n\nfunction serverSideComponent(opts, nodataid) {\n  var name = opts.name || 'Component';\n  var state = opts.state || Elem.state();\n  var props = opts.props || {};\n  var render = opts.render;\n  var afterRender = opts.afterRender || function() {};\n  if (opts.init) { opts.init(state, _.clone(props)); }\n  Common.markStart(name + '.globalRendering');\n  var refs = {};\n  Common.markStart(name + '.render');\n  var elemToRender = render(state, _.clone(props), { refs: refs, getDOMNode: function() {} });\n  Common.markStop(name + '.render');\n  var str = Elem.renderToString(elemToRender, { waitingHandlers: [], __rootListener: true, refs: refs, __noDataId: nodataid, __innerComponents: [] });\n  afterRender(state, _.clone(props), { refs: refs, getDOMNode: function() {} });\n  Common.markStop(name + '.globalRendering');\n  return str;\n}\n\nfunction factory(opts) {\n  return function(props, to) {\n    var api = {\n      __componentFactory: true,\n      renderToStaticHtml: function() {\n        var opt = _.clone(opts);\n        opt.props = _.extend(_.clone(opts.props || {}), props || {});\n        return serverSideComponent(opt, true);  \n      },\n      renderToString: function() {\n        var opt = _.clone(opts);\n        opt.props = _.extend(_.clone(opts.props || {}), props || {});\n        return serverSideComponent(opt);\n      },\n      renderTo: function(el, defer) {\n        var opt = _.clone(opts);\n        opt.props = _.extend(_.clone(opts.props || {}), props || {});\n        if (defer) {\n          Common.defer(function() {\n            mountComponent(el, opt);\n          });\n        } else {\n          return mountComponent(el, opt);\n        }\n      }\n    };\n    if (to) return api.renderTo(to);\n    return api;  \n  }  \n}\n\nexports.unmountComponent = unmountComponent;\n\nexports.component = function(opts) {\n  if (!opts.container) return factory(opts);\n  var el = opts.container;\n  mountComponent(el, opts);\n};\n\nexports.componentToString = function(opts) {\n  var opt = _.clone(opts);\n  opt.props = _.extend(_.clone(opts.props || {}), props || {});\n  return serverSideComponent(opt);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/component.js\n ** module id = 3\n ** module chunks = 0\n **/","var _ = require('./utils');\n\nmodule.exports = function(mod) {\n\n  var theModel = _.extend({}, mod || {});\n\n  var callbacks = [];\n\n  function fireCallbacks() {\n    _.each(callbacks, function(callback) {\n      callback();\n    });\n  }\n\n  var api = function() {\n    return _.clone(theModel);\n  };\n\n  return _.extend(api, {\n    onChange: function(callback) {\n      callbacks.push(callback);\n    },\n    get: function(key) {\n      return theModel[key];\n    },\n    all: function() {\n      return _.clone(theModel);\n    },\n    forceUpdate: function() {\n      fireCallbacks();\n    },\n    set: function(obj, silentOrCallback) {\n      var silent = _.isBoolean(silentOrCallback) && silentOrCallback === true;\n      if (!_.isUndefined(obj) && _.isObject(obj)) {\n        _.map(_.keys(obj), function(k) {\n          theModel[k] = obj[k];\n        });\n        if (!silent) fireCallbacks();\n        if (!silent)(silentOrCallback || function() {})();\n      }\n    },\n    replace: function(obj, silentOrCallback) {\n      theModel = {};\n      this.set(obj, silentOrCallback);\n    },\n    remove: function(key) {\n      delete theModel[key];\n      fireCallbacks();\n    }\n  });\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/state.js\n ** module id = 4\n ** module chunks = 0\n **/","\nvar registrationFunction = undefined\n\ntry {\n  registrationFunction = (document.registerElement || document.register || function() {\n      if (window.console) console.error('[ELEMJS] No registerElement function, webcomponents will not work !!!');\n  }).bind(document);\n} catch(e) {}\n\nfunction registerWebComponent(tag, elem) {\n  var thatDoc = document;\n  var ElementProto = Object.create(HTMLElement.prototype);\n  \n  ElementProto.createdCallback = function() {\n    var props = {};\n    for (var i in this.attributes) {\n      var item = this.attributes[i];\n      props[item.name] = item.value;    \n    }\n    this.props = props;\n    var node = this;\n    if (props.noshadow !== 'true') {\n      var shadowRoot = this.createShadowRoot();\n      node = thatDoc.createElement('div');\n      node.setAttribute('class', 'elemcomponent');\n      shadowRoot.appendChild(node);\n    }\n    this._node = node;\n    if (props.renderOnly && props.renderOnly === true) {\n      this.renderedElement = Elem.render(elem, node); \n    } else {\n      this.renderedElement = Elem.component({\n        container: node,\n        init: elem.init,\n        render: elem.render,\n        props: props,\n        state: elem.state\n      }); \n    }\n  };\n\n  ElementProto.attributeChangedCallback = function (attr, oldVal, newVal) {\n    this.props[attr] = newVal;\n    var props = this.props;\n    if (this.props.renderOnly && this.props.renderOnly === true) {\n      this.renderedElement = Elem.render(elem, this._node); \n    } else {\n      this.renderedElement = Elem.component({\n        container: this._node,\n        init: elem.init,\n        render: elem.render,\n        props: props,\n        state: elem.state\n      });\n    }\n  };\n\n  registrationFunction(tag, {\n    prototype: ElementProto\n  });\n}\n\nif (registrationFunction) {\n  exports.registerWebComponent = registerWebComponent;\n} else {\n  exports.registerWebComponent = function() {\n    if (window.console) console.error('[ELEMJS] WebComponent not available here :(');\n  };\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/webcomponent.js\n ** module id = 5\n ** module chunks = 0\n **/","var Common = require('./common');\nvar _ = require('./utils');\n\nmodule.exports = function stringifyDoc(ctx) {\n    ctx = ctx || {};\n    function node(name) { \n        var attrs = [];\n        var children = [];\n        return {\n            setAttribute: function(key, value) { \n                if (key === 'data-nodeid') {\n                    if (!ctx.__noDataId) {\n                        attrs.push('data-snodeid' + '=\"' + value + '\"'); \n                    }\n                } else {\n                    attrs.push(key + '=\"' + value + '\"'); \n                }\n            },\n            appendChild: function(child) { children.push(child); },\n            toHtmlString: function() {\n                var selfCloseTag = _.contains(Common.voidElements, name.toUpperCase()) && children.length === 0;\n                if (selfCloseTag) return '<' + name + ' ' + attrs.join(' ') + ' />';\n                return '<' + name + ' ' + attrs.join(' ') + '>' + _.map(children, function(child) {\n                    return child.toHtmlString();\n                }).join('') + '</' + name + '>';\n            }\n        }\n    }\n    return {\n        createElement: node,\n        createTextNode: function(value) {\n            return {\n                toHtmlString: function() { return value; }\n            };\n        }   \n    };\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/stringify.js\n ** module id = 6\n ** module chunks = 0\n **/","var _ = require('./utils');\n\nvar eventSplitter = /\\s+/;\n\nmodule.exports = function() {\n\n  var callbacks = [];\n\n  function fireCallbacks(names, event) {\n    var eventNames = [names];\n    if (eventSplitter.test(names)) {\n      eventNames = names.split(eventSplitter);\n    }\n    _.each(eventNames, function(name) {\n      _.each(callbacks, function(callbackHash) {\n        if (callbackHash.name === 'all') {\n          callbackHash.callback(name, event);\n        } else if (callbackHash.name === name) {\n          callbackHash.callback(event);\n        }\n      });  \n    });    \n  }\n\n  return {\n    trigger: fireCallbacks,\n    dispatch: fireCallbacks,\n    on: function(name, callback) {\n      this.off(name, callback);\n      callbacks.push({ name: name, callback: callback });\n    },\n    off: function(name, callback) {\n      callbacks = _.filter(callbacks, function(obj) {\n        if (obj.name === name && obj.callback === callback) {\n          return false;\n        }\n        return true;\n      });\n    },\n  };\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/events.js\n ** module id = 7\n ** module chunks = 0\n **/"],"sourceRoot":"","file":"elem.js"}