!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n;"undefined"!=typeof window?n=window:"undefined"!=typeof global?n=global:"undefined"!=typeof self&&(n=self),n.Elem=e()}}(function(){return function e(n,t,r){function i(u,c){if(!t[u]){if(!n[u]){var a="function"==typeof require&&require;if(!c&&a)return a(u,!0);if(o)return o(u,!0);var s=new Error("Cannot find module '"+u+"'");throw s.code="MODULE_NOT_FOUND",s}var f=t[u]={exports:{}};n[u][0].call(f.exports,function(e){var t=n[u][1][e];return i(t?t:e)},f,f.exports,e,n,t,r)}return t[u].exports}for(var o="function"==typeof require&&require,u=0;u<r.length;u++)i(r[u]);return i}({1:[function(e,n,t){t.debug=!1,t.voidElements=["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"],t.mouseEvents="MouseDown MouseEnter MouseLeave MouseMove MouseOut MouseOver MouseUp".toLowerCase(),t.events="Wheel Scroll TouchCancel TouchEnd TouchMove TouchStart Click DoubleClick Drag DragEnd DragEnter DragExit DragLeave DragOver DragStart Drop Change Input Submit Focus Blur KeyDown KeyPress KeyUp Copy Cut Paste".toLowerCase()},{}],2:[function(e,n){var t=e("./common"),r=e("./utils");n.exports=function(e){function n(){r.each(s,function(e){delete a[e]}),s=[];var e=document.activeElement,n=e.dataset.key,t=[],d={};if(Elem.render(c(o,r.clone(u),{refs:d,getDOMNode:l}),i,{waitingHandlers:t,__rootListener:!0,refs:d}),f(o,r.clone(u),{refs:d,getDOMNode:l}),n){var p=document.querySelector('[data-key="'+n+'"]');if(r.focus(p),p.value){var h=2*p.value.length;p.setSelectionRange(h,h)}}r.each(t,function(e){s.push(e.id+"_"+e.event.replace("on","")),a[e.id+"_"+e.event.replace("on","")]=function(){e.callback.apply({render:c},arguments)}})}var i=e.container,o=e.state||Elem.state(),u=e.props||{},c=e.render,a={},s=[],f=e.afterRender||function(){},l=function(){return r.findNode(i)};return e.init&&e.init(o,r.clone(u)),r.on(i,t.events+" "+t.mouseEvents,function(e){var n=e.target,t=n.dataset.nodeid+"_"+e.type;if(a[t])a[t](e);else{for(;!a[t]&&n.dataset.nodeid;)n=n.parentElement,t=n.dataset.nodeid+"_"+e.type;a[t]&&a[t](e)}}),n(),o.onChange(n),o}},{"./common":1,"./utils":6}],3:[function(e,n,t){function r(e){if(p.isUndefined(e))return"";var n=p.map(p.keys(e),function(n){var t=p.dasherize(n);"className"===n&&(t="class");var r=e[n];return!p.isUndefined(r)&&p.isFunction(r)&&(r=r()),p.isUndefined(r)?void 0:t+": "+r+";"});return n=p.filter(n,function(e){return!p.isUndefined(e)}),n.join(" ")}function i(e){if(p.isUndefined(e))return[];var n=p.map(p.keys(e),function(n){var t=e[n];return p.isUndefined(t)||t!==!0?void 0:p.dasherize(n)});return n=p.filter(n,function(e){return!p.isUndefined(e)})}function o(e){return 0===e?e:""===e?[]:e||[]}function u(e){return{getDOMNode:function(){return p.findNode('[data-nodeid="'+e+'"]')}}}function c(e,n,t){p.each(p.keys(e),function(r){var i=p.dasherize(r);p.startsWith(i,"on")&&t&&t.waitingHandlers&&t.waitingHandlers.push({root:t.root,id:n,event:i,callback:e[r]}),"ref"===i&&t&&t.refs&&(t.refs[e[r]]=u(n))})}function a(e,n){return{key:e,value:n}}function s(e){if(p.isUndefined(e))return[];var n=[];return p.each(p.keys(e),function(t){var o=p.dasherize(t);if("className"===t&&(o="class"),!p.startsWith(o,"on")&&"ref"!==o){var u=e[t];!p.isUndefined(u)&&p.isFunction(u)&&(u=u()),p.isUndefined(u)||n.push(p.isObject(u)&&"style"===o?a("style",r(u)):p.isArray(u)&&"class"===o?a(o,u.join(" ")):p.isObject(u)&&"class"===o?a(o,i(u).join(" ")):a(o,u))}}),n}function f(e,n,t){var r=p.uniqueId("node_");!p.isUndefined(t)||p.isUndefined(n)||n.__isAttrs||(t=n,n={}),e=p.escape(e)||"unknown",n=n||{},t=o(t),(p.isRegExp(t)||p.isUndefined(t)||p.isNull(t))&&(t=[]),p.isArray(t)&&(t=p.chain(t).map(function(e){return p.isFunction(e)?e():e}).filter(function(e){return!p.isUndefined(e)}).value());var i=p.contains(d.voidElements,e.toUpperCase())&&(p.isNull(t)||p.isUndefined(t)||p.isArray(t)&&0===t.length),u=s(n);return u.push(a("data-nodeid",p.escape(r))),d.debug&&u.push(a("title",p.escape(r))),{name:e,attrs:n,children:t,isElement:!0,nodeId:r,toJsonString:function(e){return e?JSON.stringify(this,null,2):JSON.stringify(this)},toHtmlNode:function(o,a){c(n,r,a);var s=o.createElement(p.escape(e));return p.each(u,function(e){s.setAttribute(e.key,e.value)}),i||(p.isArray(t)?p.each(t,function(e){s.appendChild(e.toHtmlNode(o,a))}):p.isNumber(t)?s.appendChild(o.createTextNode(t+"")):p.isString(t)?s.appendChild(o.createTextNode(t)):p.isBoolean(t)?s.appendChild(o.createTextNode(t+"")):p.isObject(t)&&t.isElement?s.appendChild(t.toHtmlNode(o,a)):p.isObject(t)&&t.__asHtml?s.innerHTML=t.__asHtml:s.appendChild(o.createTextNode(t.toString()))),s}}}function l(e,n,t){return p.isFunction(e)&&(e=e((t||{props:{}}).props)),p.isUndefined(e)?[]:p.isArray(e)?p.chain(e).map(function(e){return p.isFunction(e)?e():e}).filter(function(e){return!p.isUndefined(e)}).map(function(e){return e.toHtmlNode(n,t)}).value():[e.toHtmlNode(n,t)]}var d=e("./common"),p=e("./utils"),h=e("./component"),m=e("./state"),v=e("./webcomponent").registerWebComponent,g=e("./stringify");t.renderToString=function(e){return p.map(l(e,g()),function(e){return e.toHtmlString()}).join("")},t.el=f,t.sel=function(e,n){return f(e,{},n)},t.vel=function(e,n){return f(e,n,[])},t.nbsp=function(e){return f("span",{__asHtml:p.times(e||1,function(){return"&nbsp;"})})},t.text=function(e){return f("span",{},e)},t.elements=function(){return p.map(arguments,function(e){return e})},t.render=function(e,n,t){var r=(t||{}).waitingHandlers||[],i=(t||{}).refs||{},o=(t||{}).props||{},u=document;n.ownerDocument&&(u=n.ownerDocument);var c=l(e,u,{root:n,waitingHandlers:r,refs:i,props:o});for(p.isString(n)&&(n=u.querySelector(n));n.firstChild;)n.removeChild(n.firstChild);p.each(c,function(e){n.appendChild(e)}),t&&t.__rootListener||p.each(r,function(e){p.on('[data-nodeid="'+e.id+'"]',e.event.replace("on",""),function(){e.callback.apply({},arguments)})})},t.component=h,t.state=m,t.Utils=p,t.registerWebComponent=v},{"./common":1,"./component":2,"./state":4,"./stringify":5,"./utils":6,"./webcomponent":7}],4:[function(e,n){var t=e("./utils");n.exports=function(e){function n(){t.each(i,function(e){e()})}var r=t.extend({},e||{}),i=[],o=function(){return t.clone(r)};return t.extend(o,{onChange:function(e){i.push(e)},get:function(e){return r[e]},all:function(){return t.clone(r)},forceUpdate:function(){n()},set:function(e,i){var o=t.isBoolean(i)&&i===!0;!t.isUndefined(e)&&t.isObject(e)&&(t.map(t.keys(e),function(n){r[n]=e[n]}),o||n(),o||(i||function(){})())},replace:function(e,n){r={},this.set(e,n)},remove:function(e){delete r[e],n()}})}},{"./utils":6}],5:[function(e,n){var t=e("./common");n.exports=function(){function e(e){var n=[],r=[];return{setAttribute:function(e,t){n.push(e+'="'+t+'"')},appendChild:function(e){r.push(e)},toHtmlString:function(){var i=_.contains(t.voidElements,e.toUpperCase())&&0===r.length;return i?"<"+e+" "+n.join(" ")+" />":"<"+e+" "+n.join(" ")+">"+_.map(r,function(e){return e.toHtmlString()}).join("")+"</"+e+">"}}}return{createElement:e,createTextNode:function(e){return{toHtmlString:function(){return e}}}}}},{"./common":1}],6:[function(e,n,t){function r(e){if(!w(e))return[];if(Object.keys)return Object.keys(e);var n=[];for(var t in e)D(e,t)&&n.push(t);return n}function i(e){for(var n=n(e),t=n.length,r=Array(t),i=0;t>i;i++)r[i]=e[n[i]];return r}function o(e,n,t){if(null==e)return-1;var r=0,i=e.length;if(t){if("number"!=typeof t)return r=sortedIndex(e,n),e[r]===n?r:-1;r=0>t?Math.max(0,i+t):t}for(;i>r;r++)if(e[r]===n)return r;return-1}function u(e,n){if(null==e)return e;var t,r=e.length;if(r===+r)for(t=0;r>t;t++)n(e[t],t,e);else{var i=i(e);for(t=0,r=i.length;r>t;t++)n(e[i[t]],i[t],e)}return e}function c(e,n){if(null==e)return[];for(var t,r=e.length!==+e.length&&r(e),i=(r||e).length,o=Array(i),u=0;i>u;u++)t=r?r[u]:u,o[u]=n(e[t],t,e);return o}function a(e,n){var t=[];return null==e?t:(u(e,function(e,r,i){n(e,r,i)&&t.push(e)}),t)}function s(e,n,t){null==e&&(e=[]);var r,i=e.length!==+e.length&&i(e),o=(i||e).length,u=0;if(arguments.length<3){if(!o)throw new TypeError(reduceError);t=e[i?i[u++]:u++]}for(;o>u;u++)r=i?i[u]:u,t=n(t,e[r],r,e);return t}function f(e,n,t){return a(e,m(n),t)}function l(e,n){return a(e,d(n))}function d(e){var n=n(e),t=n.length;return function(e){if(null==e)return!t;e=new Object(e);for(var r=0;t>r;r++){var i=n[r],o=i[0];if(i[1]!==e[o]||!(o in e))return!1}return!0}}function p(e){return e}function h(e){return function(n){return n[e]}}function m(e){return function(){return!e.apply(this,arguments)}}function v(e){for(var n=n(e),t=n.length,r=Array(t),i=0;t>i;i++)r[i]=[n[i],e[n[i]]];return r}function g(e){function n(){return{value:function(){return t},map:function(e){return t=r.map(t,e),this},filter:function(e){return t=r.filter(t,e),this},each:function(e){return r.each(t,e),this},values:function(){return r.values()},keys:function(){return r.keys()},reduce:function(e,n,i){return r.reduce(t,e,n,i)},reject:function(e,n){return t=r.reject(t,e,n),this},where:function(e){return t=r.where(t,e),this}}}var t=e,r=this;return n()}function y(e,n){return null==e?!1:(e.length!==+e.length&&(e=i(e)),o(e,n)>=0)}function b(e){var n=++B+"";return e?e+n:n}function E(e,n){for(var t=[],r=0;e>r;r++)t.push(n(e));return t}function O(e){return w(e)?N(e)?e.slice():j({},e):e}function j(e){if(!w(e))return e;for(var n,t,r=1,i=arguments.length;i>r;r++){n=arguments[r];for(t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e}function C(e){return void 0===e}function N(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)}function w(e){var n=typeof e;return"function"===n||"object"===n&&!!e}function x(e){return"[object Number]"===Object.prototype.toString.call(e)}function S(e){return"[object String]"===Object.prototype.toString.call(e)}function A(e){return e===!0||e===!1||"[object Boolean]"===Object.prototype.toString.call(e)}function U(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function _(e){return"[object Function]"===Object.prototype.toString.call(e)}function k(e){return null===e}function M(e){return x(e)&&e!==+e}function D(e,n){return null!=e&&Object.prototype.hasOwnProperty.call(e,n)}function H(e){return e.replace(/([A-Z\d]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").toLowerCase().replace(/_/g,"-")}function T(e,n){return 0===e.indexOf(n)}function R(e){e.focus&&e.focus()}function L(e){return e===document.activeElement&&(!document.hasFocus||document.hasFocus())&&!!(e.type||e.href||~e.tabIndex)}function F(e,n,t){u(n.split(" "),function(n){S(e)?document.querySelector(e).addEventListener(n,t):e.addEventListener(n,t)})}function q(){return document.querySelector(node)}var B=0,I={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},W=function(e,n){var t=function(n){return e[n]},r="(?:"+n(e).join("|")+")",i=RegExp(r),o=RegExp(r,"g");return function(e){return e=null==e?"":""+e,i.test(e)?e.replace(o,t):e}};t.escape=W(I,r),t.keys=r,t.values=i,t.indexOf=o,t.each=u,t.map=c,t.filter=a,t.chain=g,t.contains=y,t.uniqueId=b,t.times=E,t.clone=O,t.extend=j,t.isUndefined=C,t.isArray=N,t.isObject=w,t.isNumber=x,t.isString=S,t.isBoolean=A,t.isRegExp=U,t.isFunction=_,t.isNull=k,t.isNaN=M,t.has=D,t.dasherize=H,t.startsWith=T,t.functionfocus=R,t.hasFocus=L,t.on=F,t.findNode=q,t.reduce=s,t.reject=f,t.where=l,t.matches=d,t.negate=m,t.property=h,t.identity=p,t.pairs=v},{}],7:[function(e,n,t){function r(e,n){var t=document,r=Object.create(HTMLElement.prototype);r.createdCallback=function(){var e={};for(var r in this.attributes){var i=this.attributes[r];e[i.name]=i.value}this.props=e;var o=this;if("true"!==e.noshadow){var u=this.createShadowRoot();o=t.createElement("div"),o.setAttribute("id","reactcomponent"),u.appendChild(o)}this._node=o,this.renderedElement=e.renderOnly&&e.renderOnly===!0?Elem.render(n,o):Elem.component({container:o,init:n.init,render:n.render,props:e,state:n.state})},r.attributeChangedCallback=function(e,t,r){this.props[e]=r;var i=this.props;this.renderedElement=this.props.renderOnly&&this.props.renderOnly===!0?Elem.render(n,this._node):Elem.component({container:this._node,init:n.init,render:n.render,props:i,state:n.state})},i(e,{prototype:r})}var i=(document.registerElement||document.register).bind(document);void 0===i&&console.error("No registerElement function, webcomponents will not work !!!"),t.registerWebComponent=r},{}]},{},[3])(3)});